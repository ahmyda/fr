<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SLA Module - University Platform</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            /* Modern Academic Theme - Clean & Professional */
            --primary-color: #1a56db;
            --secondary-color: #3730a3;
            --accent-color: #dc2626;
            --accent-secondary: #0891b2;
            --background-color: #f8fafc;
            --surface-color: #ffffff;
            --text-color: #1e293b;
            --text-secondary: #64748b;
            --border-color: #e2e8f0;
            --success-color: #059669;
            --warning-color: #d97706;
            --info-color: #2563eb;
            --shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            --shadow-lg: 0 8px 24px rgba(0, 0, 0, 0.12);
            --border-radius: 10px;
            --border-radius-sm: 6px;
            --transition: all 0.2s ease;
        }

        .dark-theme {
            /* Dark Theme - Academic Focus */
            --primary-color: #3b82f6;
            --secondary-color: #6366f1;
            --accent-color: #ef4444;
            --accent-secondary: #06b6d4;
            --background-color: #0f172a;
            --surface-color: #1e293b;
            --text-color: #f1f5f9;
            --text-secondary: #94a3b8;
            --border-color: #334155;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --info-color: #3b82f6;
            --shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
            --shadow-lg: 0 8px 24px rgba(0, 0, 0, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            transition: background-color 0.2s, border-color 0.2s;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            line-height: 1.6;
            min-height: 100vh;
        }

        /* Top Header Bar - Compact Version */
        .top-header {
            background-color: var(--primary-color);
            color: white;
            padding: 16px 20px;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: var(--shadow-lg);
        }

        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1400px;
            margin: 0 auto;
        }

        .header-brand h1 {
            font-size: 1.4rem;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .header-brand p {
            font-size: 0.8rem;
            opacity: 0.9;
            line-height: 1.3;
        }

        .header-controls {
            display: flex;
            gap: 8px;
            align-items: center;
        }

        .theme-toggle {
            background-color: rgba(255, 255, 255, 0.15);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 6px 12px;
            border-radius: var(--border-radius-sm);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 6px;
            font-weight: 500;
            font-size: 0.85rem;
            transition: var(--transition);
        }

        .theme-toggle:hover {
            background-color: rgba(255, 255, 255, 0.25);
        }

        /* Compact Title Navigation - Horizontal Scrollable */
        .title-navigation {
            background-color: var(--surface-color);
            border-bottom: 1px solid var(--border-color);
            padding: 12px 20px;
            position: sticky;
            top: 70px;
            z-index: 99;
            box-shadow: var(--shadow);
            overflow-x: auto;
            white-space: nowrap;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: thin;
        }

        .title-navigation::-webkit-scrollbar {
            height: 4px;
        }

        .title-navigation::-webkit-scrollbar-track {
            background: transparent;
        }

        .title-navigation::-webkit-scrollbar-thumb {
            background: var(--border-color);
            border-radius: 2px;
        }

        .title-nav-container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .title-nav-list {
            display: inline-flex;
            gap: 10px;
            list-style: none;
            padding-bottom: 4px;
        }

        .title-item {
            display: inline-block;
        }

        .title-link {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background-color: var(--background-color);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius-sm);
            padding: 10px 14px;
            cursor: pointer;
            transition: var(--transition);
            min-width: 90px;
            text-align: center;
            text-decoration: none;
            color: var(--text-color);
        }

        .title-link:hover {
            transform: translateY(-1px);
            border-color: var(--primary-color);
            box-shadow: var(--shadow);
        }

        .title-link.active {
            border-color: var(--primary-color);
            background-color: rgba(26, 86, 219, 0.1);
            color: var(--primary-color);
        }

        .title-icon {
            font-size: 1rem;
            margin-bottom: 4px;
            color: var(--primary-color);
        }

        .title-link.active .title-icon {
            color: var(--primary-color);
        }

        .title-text {
            font-size: 0.75rem;
            font-weight: 600;
            margin-bottom: 2px;
            line-height: 1.2;
        }

        .title-subtext {
            font-size: 0.65rem;
            color: var(--text-secondary);
            line-height: 1.2;
        }

        /* Main Content Area */
        .main-content {
            padding: 20px;
            max-width: 1400px;
            margin: 0 auto;
        }

        .page-header {
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 1px solid var(--border-color);
        }

        .page-header h2 {
            color: var(--primary-color);
            font-size: 1.8rem;
            font-weight: 800;
            margin-bottom: 6px;
        }

        .page-header p {
            font-size: 1rem;
            color: var(--text-secondary);
        }

        /* Content Sections */
        .content-section {
            background-color: var(--surface-color);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            padding: 24px;
            margin-bottom: 24px;
            border: 1px solid var(--border-color);
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 14px;
            border-bottom: 1px solid var(--border-color);
        }

        .section-title {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--primary-color);
        }

        .toggle-btn {
            background: none;
            border: 1px solid var(--border-color);
            color: var(--text-color);
            padding: 6px 12px;
            border-radius: var(--border-radius-sm);
            cursor: pointer;
            font-size: 0.8rem;
            display: flex;
            align-items: center;
            gap: 5px;
            transition: var(--transition);
        }

        .toggle-btn:hover {
            background-color: rgba(26, 86, 219, 0.1);
        }

        /* Summary Section */
        .summary-content {
            line-height: 1.7;
            font-size: 1rem;
        }

        .summary-content h3 {
            margin-top: 20px;
            margin-bottom: 10px;
            color: var(--primary-color);
            font-size: 1.1rem;
            font-weight: 600;
        }

        .summary-content h4 {
            margin-top: 16px;
            margin-bottom: 8px;
            color: var(--secondary-color);
            font-size: 1rem;
            font-weight: 600;
        }

        .summary-content p {
            margin-bottom: 14px;
            color: var(--text-color);
        }

        .summary-content em {
            color: var(--accent-color);
            font-style: italic;
        }

        .summary-content ul, .summary-content ol {
            margin-left: 20px;
            margin-bottom: 14px;
        }

        .summary-content li {
            margin-bottom: 6px;
            color: var(--text-color);
        }

        /* Quiz Section */
        .quiz-container {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .quiz-info {
            background-color: rgba(26, 86, 219, 0.05);
            border-left: 4px solid var(--primary-color);
            padding: 14px;
            border-radius: var(--border-radius-sm);
            font-size: 0.9rem;
        }

        .question-card {
            background-color: var(--background-color);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            padding: 20px;
            margin-bottom: 12px;
        }

        .question-text {
            font-weight: 600;
            margin-bottom: 14px;
            font-size: 1rem;
            color: var(--text-color);
        }

        .options-container {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .option {
            display: flex;
            align-items: center;
            padding: 10px 14px;
            background-color: var(--surface-color);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius-sm);
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.9rem;
        }

        .option:hover {
            border-color: var(--primary-color);
        }

        .option.selected {
            border-color: var(--primary-color);
            background-color: rgba(26, 86, 219, 0.1);
        }

        .option.correct {
            border-color: var(--success-color);
            background-color: rgba(5, 150, 105, 0.1);
        }

        .option.incorrect {
            border-color: var(--accent-color);
            background-color: rgba(220, 38, 38, 0.1);
        }

        .option input {
            margin-right: 10px;
            cursor: pointer;
        }

        .quiz-actions {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 20px;
        }

        .btn {
            padding: 10px 18px;
            border-radius: var(--border-radius-sm);
            border: none;
            cursor: pointer;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            transition: var(--transition);
            font-size: 0.9rem;
        }

        .btn-primary {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--secondary-color);
        }

        .btn-secondary {
            background-color: var(--surface-color);
            color: var(--text-color);
            border: 1px solid var(--border-color);
        }

        .btn-secondary:hover {
            background-color: rgba(26, 86, 219, 0.1);
        }

        .results-container {
            background-color: var(--surface-color);
            border-radius: var(--border-radius);
            padding: 20px;
            margin-top: 20px;
            border: 1px solid var(--border-color);
        }

        .results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 14px;
            padding-bottom: 14px;
            border-bottom: 1px solid var(--border-color);
        }

        .score {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--primary-color);
        }

        .feedback {
            margin-top: 14px;
            padding-top: 14px;
            border-top: 1px solid var(--border-color);
        }

        /* Key Concepts Section */
        .concepts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 16px;
        }

        .concept-card {
            background-color: var(--background-color);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            padding: 18px;
            cursor: pointer;
            transition: var(--transition);
        }

        .concept-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
            border-color: var(--primary-color);
        }

        .concept-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .concept-number {
            background-color: var(--primary-color);
            color: white;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.8rem;
        }

        .concept-title {
            font-weight: 600;
            color: var(--primary-color);
            flex: 1;
            margin-left: 10px;
            font-size: 1rem;
        }

        .concept-toggle {
            background: none;
            border: none;
            color: var(--text-color);
            cursor: pointer;
            padding: 4px;
            font-size: 0.9rem;
        }

        .concept-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
            color: var(--text-color);
            line-height: 1.6;
            font-size: 0.9rem;
        }

        .concept-content.show {
            max-height: 500px;
        }
        /* Compact Title Navigation - Grid Layout */
        .title-navigation {
            background-color: var(--surface-color);
            border-bottom: 1px solid var(--border-color);
            padding: 12px 20px;
            position: sticky;
            top: 70px;
            z-index: 99;
            box-shadow: var(--shadow);
        }

        .title-nav-container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .title-nav-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 8px;
        }

        .title-card {
            background-color: var(--background-color);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius-sm);
            padding: 12px;
            cursor: pointer;
            transition: var(--transition);
            text-align: center;
            min-height: 60px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .title-card:hover {
            transform: translateY(-1px);
            border-color: var(--primary-color);
            box-shadow: var(--shadow);
        }

        .title-card.active {
            border-color: var(--primary-color);
            background-color: rgba(26, 86, 219, 0.1);
            color: var(--primary-color);
        }

        .title-card h3 {
            font-size: 0.85rem;
            font-weight: 600;
            margin-bottom: 4px;
            color: var(--primary-color);
            line-height: 1.2;
        }

        .title-card.active h3 {
            color: var(--primary-color);
        }

        .title-card p {
            font-size: 0.7rem;
            color: var(--text-secondary);
            line-height: 1.2;
            margin: 0;
        }

        .title-card i {
            font-size: 0.9rem;
            margin-right: 4px;
            color: var(--primary-color);
        }

        .title-card.active i {
            color: var(--primary-color);
        }

        /* Mobile Optimizations for Grid */
        @media (max-width: 768px) {
            .title-navigation {
                padding: 10px 16px;
                top: 60px;
            }
            
            .title-nav-grid {
                grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
                gap: 6px;
            }
            
            .title-card {
                padding: 10px 8px;
                min-height: 55px;
            }
            
            .title-card h3 {
                font-size: 0.8rem;
            }
            
            .title-card p {
                font-size: 0.65rem;
            }
            
            .title-card i {
                font-size: 0.8rem;
                margin-right: 3px;
            }
        }

        @media (max-width: 480px) {
            .title-navigation {
                padding: 8px 12px;
                top: 56px;
            }
            
            .title-nav-grid {
                grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
                gap: 5px;
            }
            
            .title-card {
                padding: 8px 6px;
                min-height: 50px;
            }
            
            .title-card h3 {
                font-size: 0.75rem;
            }
            
            .title-card p {
                font-size: 0.6rem;
            }
            
            .title-card i {
                font-size: 0.75rem;
            }
        }

        /* Extra small devices - switch to horizontal scroll on very small screens */
        @media (max-width: 360px) {
            .title-navigation {
                overflow-x: auto;
                white-space: nowrap;
                -webkit-overflow-scrolling: touch;
            }
            
            .title-nav-grid {
                display: inline-flex;
                gap: 6px;
                padding-bottom: 4px;
            }
            
            .title-card {
                min-width: 100px;
                min-height: 55px;
                display: inline-flex;
                flex-direction: column;
                justify-content: center;
                white-space: normal;
            }
        }

        /* Final Quiz Section */
        .lecture-selector {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }

        .lecture-checkbox {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 6px 12px;
            background-color: var(--surface-color);
            border-radius: var(--border-radius-sm);
            border: 1px solid var(--border-color);
            transition: var(--transition);
            font-size: 0.85rem;
        }

        .lecture-checkbox:hover {
            border-color: var(--primary-color);
        }

        .lecture-checkbox input {
            cursor: pointer;
        }

        .progress-bar {
            height: 6px;
            background-color: var(--border-color);
            border-radius: 3px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background-color: var(--primary-color);
            width: 0%;
            transition: width 0.3s ease;
        }

        /* Final Quiz Questions */
        .final-question {
            background-color: var(--background-color);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            padding: 18px;
            margin-bottom: 16px;
        }

        .question-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            padding-bottom: 8px;
            border-bottom: 1px dashed var(--border-color);
            flex-wrap: wrap;
            gap: 8px;
        }

        .question-number {
            font-weight: 600;
            color: var(--primary-color);
            background-color: rgba(26, 86, 219, 0.1);
            padding: 3px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
        }

        .question-lecture {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        /* Detailed Results */
        .result-details {
            margin-top: 16px;
        }

        .result-item {
            padding: 14px;
            margin-bottom: 10px;
            border-radius: var(--border-radius-sm);
            border-left: 4px solid var(--border-color);
            font-size: 0.9rem;
        }

        .result-item.correct {
            border-left-color: var(--success-color);
            background-color: rgba(5, 150, 105, 0.05);
        }

        .result-item.incorrect {
            border-left-color: var(--accent-color);
            background-color: rgba(220, 38, 38, 0.05);
        }

        .result-question {
            font-weight: 600;
            margin-bottom: 6px;
        }

        .result-answer {
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-top: 3px;
        }

        .result-answer.correct-answer {
            color: var(--success-color);
            font-weight: 600;
        }

        .result-answer.user-answer {
            color: var(--accent-color);
        }

        /* Back to Top Button */
        .back-to-top {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: var(--primary-color);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: var(--shadow-lg);
            z-index: 100;
            opacity: 0;
            transform: translateY(20px);
            transition: var(--transition);
            font-size: 0.9rem;
        }

        .back-to-top.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .back-to-top:hover {
            background-color: var(--secondary-color);
        }

        /* Mobile Optimizations */
        @media (max-width: 768px) {
            .top-header {
                padding: 12px 16px;
            }
            
            .header-brand h1 {
                font-size: 1.2rem;
            }
            
            .header-brand p {
                font-size: 0.75rem;
            }
            
            .theme-toggle {
                padding: 5px 10px;
                font-size: 0.8rem;
            }
            
            .title-navigation {
                padding: 10px 16px;
                top: 60px;
            }
            
            .title-link {
                padding: 8px 12px;
                min-width: 80px;
            }
            
            .title-text {
                font-size: 0.7rem;
            }
            
            .title-subtext {
                font-size: 0.6rem;
            }
            
            .main-content {
                padding: 16px;
            }
            
            .content-section {
                padding: 18px;
                margin-bottom: 20px;
            }
            
            .page-header h2 {
                font-size: 1.5rem;
            }
            
            .page-header p {
                font-size: 0.9rem;
            }
            
            .section-title {
                font-size: 1.2rem;
            }
            
            .concepts-grid {
                grid-template-columns: 1fr;
                gap: 12px;
            }
            
            .quiz-actions {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
                justify-content: center;
            }
            
            .question-meta {
                flex-direction: column;
                align-items: flex-start;
            }
        }

        @media (max-width: 480px) {
            .main-content {
                padding: 12px;
            }
            
            .content-section {
                padding: 16px;
            }
            
            .top-header {
                padding: 10px 12px;
            }
            
            .header-brand h1 {
                font-size: 1.1rem;
            }
            
            .title-navigation {
                padding: 8px 12px;
                top: 56px;
            }
            
            .title-link {
                padding: 6px 10px;
                min-width: 70px;
            }
            
            .page-header h2 {
                font-size: 1.3rem;
            }
            
            .section-title {
                font-size: 1.1rem;
            }
            
            .back-to-top {
                bottom: 15px;
                right: 15px;
                width: 36px;
                height: 36px;
                font-size: 0.8rem;
            }
            
            .summary-content {
                font-size: 0.95rem;
            }
            
            .question-card {
                padding: 16px;
            }
            
            .final-question {
                padding: 14px;
            }
        }

        /* Extra small devices */
        @media (max-width: 360px) {
            .title-link {
                min-width: 65px;
                padding: 5px 8px;
            }
            
            .title-text {
                font-size: 0.65rem;
            }
            
            .title-subtext {
                font-size: 0.55rem;
            }
            
            .header-brand h1 {
                font-size: 1rem;
            }
        }

        /* Utility Classes */
        .hidden {
            display: none !important;
        }

        .show {
            display: block !important;
        }

        /* Scrollbar Styling */
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: var(--surface-color);
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--border-color);
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary-color);
        }
    </style>
</head>
<body class="light-theme">
    <!-- Top Header - Compact -->
    <header class="top-header">
        <div class="header-container">
            <div class="header-brand">
                <h1>SLA Module</h1>
               
            </div>
            
            <div class="header-controls">
                <button class="theme-toggle" id="themeToggle">
                    <i class="fas fa-moon"></i> Theme
                </button>
            </div>
        </div>
    </header>

    <!-- Compact Horizontal Title Navigation -->
    <nav class="title-navigation">
    <div class="title-nav-container">
        <div class="title-nav-grid">
            <div class="title-card active" data-section="home">
                <h3><i class="fas fa-home"></i> Home</h3>
                <p>Overview</p>
            </div>
            <div class="title-card" data-section="lecture1">
                <h3>Lecture 1</h3>
                <p>Intro to SLA</p>
            </div>
            <div class="title-card" data-section="lecture2">
                <h3>Lecture 2</h3>
                <p>Acquisition</p>
            </div>
            <div class="title-card" data-section="lecture3">
                <h3>Lecture 3</h3>
                <p>Rationalism</p>
            </div>
            <div class="title-card" data-section="lecture4">
                <h3>Lecture 4</h3>
                <p>Progress</p>
            </div>
            <div class="title-card" data-section="lecture5">
                <h3>Lecture 5</h3>
                <p>Theories</p>
            </div>
            <div class="title-card" data-section="final-quiz">
                <h3><i class="fas fa-tasks"></i> Quiz</h3>
                <p>Assessment</p>
            </div>
        </div>
    </div>
</nav>
    
    <!-- Main Content Area -->
    <main class="main-content">
        <!-- Home Content (Default) -->
        <section id="home-content">
            <div class="page-header">
                <h2>Welcome to the SLA Module</h2>
                <p>Master the fundamentals of Second Language Acquisition</p>
            </div>
            
            <div class="content-section">
                <div class="section-header">
                    <h3 class="section-title">Module Overview</h3>
                </div>
                
                <div class="summary-content">
                    <p>This interactive platform is designed for the <strong>M1 Second Language Acquisition module</strong> taught by <strong>M. Benabderahmane</strong>. The module covers fundamental theories, concepts, and research in the field of Second Language Acquisition (SLA).</p>
                    
                    <h3>Module Structure</h3>
                    <p>The module consists of five comprehensive lectures:</p>
                    <ol>
                        <li><strong>Introduction to Second Language Acquisition</strong> - Key terms, definitions, and foundational concepts</li>
                        <li><strong>Language Acquisition</strong> - Theories, stages, and developmental processes</li>
                        <li><strong>Rationalism</strong> - Philosophical foundations and language acquisition</li>
                        <li><strong>Signs of Progress</strong> - Interlanguage, developmental stages, and progress indicators</li>
                        <li><strong>SLA Theories</strong> - Major hypotheses and theoretical frameworks</li>
                    </ol>
                    
                    <h3>Getting Started</h3>
                    <p>Use the navigation bar above to access any lecture. Each lecture includes a summary, quiz, and key concepts section. Track your progress through the quizzes and test your knowledge with the final module assessment.</p>
                    
                    <div class="quiz-actions" style="margin-top: 24px;">
                        <button class="btn btn-primary" id="startLearningBtn">
                            <i class="fas fa-play-circle"></i> Start with Lecture 1
                        </button>
                        <button class="btn btn-secondary" id="jumpToFinalQuizBtn">
                            <i class="fas fa-tasks"></i> Go to Final Quiz
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="content-section">
                <div class="section-header">
                    <h3 class="section-title">Quick Lecture Preview</h3>
                </div>
                
                <div class="concepts-grid">
                    <div class="concept-card" onclick="loadSection('lecture1')">
                        <div class="concept-header">
                            <div class="concept-number">1</div>
                            <div class="concept-title">Key Terms in SLA</div>
                        </div>
                        <p>Mother Tongue, Interlanguage, Transfer, Fossilization</p>
                    </div>
                    
                    <div class="concept-card" onclick="loadSection('lecture2')">
                        <div class="concept-header">
                            <div class="concept-number">2</div>
                            <div class="concept-title">Acquisition Stages</div>
                        </div>
                        <p>Behaviorist, Nativist, Interactionist Theories</p>
                    </div>
                    
                    <div class="concept-card" onclick="loadSection('lecture3')">
                        <div class="concept-header">
                            <div class="concept-number">3</div>
                            <div class="concept-title">Rationalist Philosophy</div>
                        </div>
                        <p>Universal Grammar, Innate Ideas, Poverty of Stimulus</p>
                    </div>
                    
                    <div class="concept-card" onclick="loadSection('lecture4')">
                        <div class="concept-header">
                            <div class="concept-number">4</div>
                            <div class="concept-title">Progress Indicators</div>
                        </div>
                        <p>Interlanguage, U-shaped Development, Self-Correction</p>
                    </div>
                    
                    <div class="concept-card" onclick="loadSection('lecture5')">
                        <div class="concept-header">
                            <div class="concept-number">5</div>
                            <div class="concept-title">SLA Theories</div>
                        </div>
                        <p>Input Hypothesis, Output Hypothesis, Critical Period</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Lectures Content (Dynamically Loaded) -->
        <section id="lecture-content" class="hidden">
            <!-- Content will be loaded dynamically by JavaScript -->
        </section>
        
        <!-- Final Quiz Content -->
        <section id="final-quiz-content" class="hidden">
            <div class="page-header">
                <h2>Final Module Quiz</h2>
                <p>Comprehensive assessment covering all five lectures - 10 random questions</p>
            </div>
            
            <div class="content-section">
                <div class="section-header">
                    <h3 class="section-title">Comprehensive Assessment</h3>
                    <button class="toggle-btn" id="toggleFinalQuizInfo">
                        <i class="fas fa-info-circle"></i> Instructions
                    </button>
                </div>
                
                <div class="quiz-info hidden" id="finalQuizInfo">
                    <p><strong>Instructions:</strong> This comprehensive quiz randomly selects 10 questions from all five lectures. Each attempt generates a new set of questions. You will receive detailed feedback and recommendations based on your performance.</p>
                    <p><strong>Time:</strong> No time limit</p>
                    <p><strong>Passing Score:</strong> 70% or higher (7/10)</p>
                    <p><strong>Questions:</strong> 10 randomly selected from 100+ questions across all lectures</p>
                </div>
                
                <div class="quiz-container" id="finalQuizContainer">
                    <p>Click "Start Final Quiz" to begin your comprehensive assessment.</p>
                </div>
                
                <div class="quiz-actions">
                    <button class="btn btn-secondary" id="resetFinalQuiz">
                        <i class="fas fa-redo"></i> Reset Quiz
                    </button>
                    <button class="btn btn-primary" id="startFinalQuiz">
                        <i class="fas fa-play"></i> Start Final Quiz (10 Questions)
                    </button>
                    <button class="btn btn-primary" id="submitFinalQuiz" style="display: none;">
                        <i class="fas fa-paper-plane"></i> Submit Final Quiz
                    </button>
                </div>
                
                <div class="progress-bar">
                    <div class="progress-fill" id="finalQuizProgress"></div>
                </div>
                
                <div class="results-container hidden" id="finalQuizResults">
                    <!-- Results will be inserted here -->
                </div>
            </div>
        </section>
    </main>

    <!-- Back to Top Button -->
    <div class="back-to-top" id="backToTop">
        <i class="fas fa-arrow-up"></i>
    </div>

    <!-- JavaScript -->
        <script>
        // Enhanced Data for all lectures (including all questions)
        const lecturesData = {
    1: {
        title: "Lecture 1: Introduction to Second Language Acquisition",
        subtitle: "Key terms, definitions, and foundational concepts",
        summary: `
            <h3>1. Key Terms</h3>
            <p>Understanding Second Language Acquisition requires a precise command of its specialized terminology. The field, often considered a sub-discipline of applied linguistics, investigates how individuals learn a language subsequent to their native (first) language.</p>
            
            <h4>Mother Tongue L1 Vs Second / Foreign Tongue L2</h4>
            <p>The term Mother Tongue (L1) refers to the first language acquired naturally in infancy, providing the cognitive and linguistic baseline. In contrast to L1, Second/Foreign Language (L2) refers to any language learned after the L1.</p>
            
            <h4>Input Vs Output</h4>
            <p>Input refers to the language raw material or data a learner hears or reads. Stephen Krashen's Monitor Model posits that comprehensible input (i+1, where 'i' is the learner's current level) is the single necessary component for acquisition to occur.</p>
            
            <h4>Interlanguage</h4>
            <p>Interlanguage (IL), introduced by Larry Selinker [1972], refers to the unique linguistic system a second language learner develops, which is structurally intermediate between the learner's L1 and the target L2.</p>
            
            <h4>Transfer</h4>
            <p>Transfer is the influence of L1 structures on L2 learning, which can be positive (facilitating learning) or negative (causing errors).</p>
            
            <h4>Fossilization</h4>
            <p>Fossilization is the cessation of interlanguage development before the learner reaches target language norms, despite continuous exposure to the L2 or further instruction.</p>
        `,
        trueFalseQuestions: [
            { question: "According to Krashen, learning (conscious knowledge) can easily become Acquisition (subconscious competence).", answer: false },
            { question: "Negative Transfer is also known as Interference, and it is a type of Error.", answer: true },
            { question: "Interlanguage is a random collection of errors made by L2 learners.", answer: false },
            { question: "Fossilization refers to the rapid progress learners make after initial exposure to L2.", answer: false },
            { question: "L1 refers to any language learned after infancy.", answer: false },
            { question: "Comprehensible input must be completely understood word-for-word to be effective.", answer: false },
            { question: "Output serves only as a practice mechanism according to Merrill Swain's hypothesis.", answer: false },
            { question: "Positive transfer occurs when L1 structure conflicts with L2 structure.", answer: false },
            { question: "Interlanguage is a static system that does not change over time.", answer: false },
            { question: "A mistake is a systematic deviation reflecting a gap in the learner's competence.", answer: false }
        ],
        mcqQuestions: [
            { question: "Which term describes a systematic error that reveals a gap in the learner's competence?", options: ["Mistake", "Fossilization", "Error", "Positive Transfer"], answer: 2 },
            { question: "According to Krashen, what is the single necessary component for acquisition?", options: ["Comprehensible output", "Explicit grammar instruction", "Comprehensible input", "Error correction"], answer: 2 },
            { question: "Which concept refers to the influence of L1 structures on L2 learning?", options: ["Interlanguage", "Fossilization", "Transfer", "Input"], answer: 2 },
            { question: "Who introduced the concept of Interlanguage?", options: ["Noam Chomsky", "Stephen Krashen", "Larry Selinker", "Merrill Swain"], answer: 2 },
            { question: "What is the term for the cessation of interlanguage development before reaching target language norms?", options: ["Plateau", "Fossilization", "Interference", "Transfer"], answer: 1 },
            { question: "Which of the following is NOT a feature of comprehensible input?", options: ["Comprehensible", "Abundant", "Irrelevant", "Relevant"], answer: 2 },
            { question: "What does the 'i+1' in Krashen's Input Hypothesis represent?", options: ["Input plus one hour of study", "The learner's current level plus one", "One item beyond the learner's textbook", "The instructor's level of difficulty"], answer: 1 },
            { question: "Which hypothesis suggests that output serves critical functions beyond practice?", options: ["Input Hypothesis", "Monitor Hypothesis", "Output Hypothesis", "Affective Filter Hypothesis"], answer: 2 },
            { question: "Which term refers to a random, non-systematic deviation in language use?", options: ["Error", "Mistake", "Fossilization", "Transfer"], answer: 1 },
            { question: "According to behaviorist traditions, language is viewed primarily as:", options: ["An innate capacity", "A social phenomenon", "Observable verbal behavior", "A cognitive system"], answer: 2 }
        ],
        keyConcepts: [
            { title: "Mother Tongue (L1)", content: "The first language acquired naturally in infancy, providing the cognitive and linguistic baseline for further language learning." },
            { title: "Second/Foreign Language (L2)", content: "Any language learned after the L1. A Second Language is learned in a community where it is widely spoken, while a Foreign Language is learned where it is not the primary language of communication." },
            { title: "Comprehensible Input (i+1)", content: "Stephen Krashen's concept that language acquisition occurs when learners receive input that is slightly above their current level (i+1), where meaning is understood even if not every word is known." },
            { title: "Interlanguage", content: "The unique linguistic system a second language learner develops, structurally intermediate between the learner's L1 and the target L2. It is systematic, rule-governed, and evolves as the learner tests hypotheses." },
            { title: "Transfer", content: "The influence of L1 structures on L2 learning. Positive transfer facilitates learning when L1 and L2 structures align; negative transfer (interference) causes errors when they conflict." }
        ]
    },
    2: {
        title: "Lecture 2: Language Acquisition",
        subtitle: "Theories, stages, and developmental processes",
        summary: `
            <h3>1. Acquisition</h3>
            <p>In linguistics, "acquisition" refers to the natural, often unconscious, way humans internalize language systems. This process fundamentally differs from conscious "learning," occurring through meaningful interaction and exposure rather than explicit instruction.</p>
            
            <h3>2. Explaining Language Acquisition</h3>
            <p>Language acquisition is a complex process investigated across linguistics, psychology, neuroscience, and cognitive science. Explanatory frameworks vary, often complementing each other.</p>
            
            <h3>3. Theories of Language Acquisition</h3>
            <h4>Behaviorist Theory</h4>
            <p>B.F. Skinner (1957) proposed that language acquisition is a process of habit formation, driven by operant conditioning, imitation, and reinforcement.</p>
            
            <h4>Nativist Theory</h4>
            <p>Noam Chomsky's (1965) theory of Universal Grammar posits that humans possess innate linguistic knowledge, termed a Language Acquisition Device (LAD).</p>
            
            <h4>Interactionist Theory</h4>
            <p>This perspective emphasizes the role of social context, scaffolding, and communicative functions in language development.</p>
        `,
        trueFalseQuestions: [
            { question: "Language acquisition refers to the conscious process of studying grammar rules.", answer: false },
            { question: "Chomsky's Universal Grammar theory emphasizes innate linguistic capacities.", answer: true },
            { question: "The behaviorist theory can fully explain children's creative language use.", answer: false },
            { question: "The pre-linguistic stage involves canonical babbling with reduplicated syllables.", answer: true },
            { question: "In the one-word stage, children typically have a vocabulary of about 200 words.", answer: false },
            { question: "Telegraphic speech is characteristic of the two-word stage.", answer: true },
            { question: "Overgeneralization of rules indicates mere imitation rather than rule learning.", answer: false },
            { question: "Language acquisition is complete by age 5.", answer: false },
            { question: "Metalinguistic awareness typically develops during the school-age period.", answer: true },
            { question: "Adolescents show little development in pragmatic competence.", answer: false }
        ],
        mcqQuestions: [
            { question: "Which theory emphasizes habit formation through reinforcement?", options: ["Nativist", "Behaviorist", "Interactionist", "Cognitive"], answer: 1 },
            { question: "What does LAD stand for in Chomsky's theory?", options: ["Language Acquisition Device", "Linguistic Analysis Development", "Learning Assessment Data", "Linguistic Application Design"], answer: 0 },
            { question: "Which stage is characterized by holophrastic speech?", options: ["Pre-linguistic", "One-word", "Two-word", "Multi-word"], answer: 1 },
            { question: "What is canonical babbling?", options: ["Crying", "Cooing", "Reduplicated syllables", "First words"], answer: 2 },
            { question: "Which stage features telegraphic speech?", options: ["Pre-linguistic", "One-word", "Two-word", "Multi-word"], answer: 2 },
            { question: "What does overgeneralization demonstrate?", options: ["Imitation", "Rule learning", "Poor memory", "Lack of exposure"], answer: 1 },
            { question: "When does metalinguistic awareness typically develop?", options: ["Pre-linguistic stage", "One-word stage", "Preschool period", "School-age period"], answer: 3 },
            { question: "Which theorist emphasized social interaction in language development?", options: ["Skinner", "Chomsky", "Vygotsky", "Krashen"], answer: 2 },
            { question: "What expands during the multi-word stage?", options: ["Vocabulary only", "Sentence structures", "Only phonology", "Only pragmatics"], answer: 1 },
            { question: "Which period involves learning academic language registers?", options: ["Preschool", "School-age", "Adolescence", "Adulthood"], answer: 1 }
        ],
        keyConcepts: [
            { title: "Language Acquisition", content: "The natural, often unconscious process of internalizing language systems through meaningful interaction and exposure, distinct from conscious learning." },
            { title: "Behaviorist Theory", content: "Skinner's theory that language acquisition occurs through habit formation driven by operant conditioning, imitation, and reinforcement." },
            { title: "Nativist Theory", content: "Chomsky's theory that humans possess innate linguistic knowledge (Universal Grammar) through a Language Acquisition Device (LAD)." },
            { title: "Interactionist Theory", content: "The perspective emphasizing social context, scaffolding, and communicative functions in language development, associated with Bruner and Vygotsky." },
            { title: "Pre-linguistic Stage", content: "The first year of life where infants develop through crying, cooing, and canonical babbling, refining categorical perception of phonetic contrasts." }
        ]
    },
    3: {
        title: "Lecture 3: Rationalism",
        subtitle: "Philosophical foundations and language acquisition",
        summary: `
            <h3>1. Rationalism as Philosophy</h3>
            <p>Rationalism emerges from a venerable philosophical tradition that privileges reason as the primary source of knowledge and justification. This epistemological stance, most prominently associated with seventeenth-century thinkers such as Ren√© Descartes, Baruch Spinoza, and Gottfried Wilhelm Leibniz, fundamentally challenges empiricist claims that all knowledge derives exclusively from sensory experience.</p>
            
            <h3>2. Core Concepts of Rationalism</h3>
            <h4>Innate Ideas</h4>
            <p>Knowledge exists prior to experience, hardwired into the human cognitive architecture.</p>
            
            <h4>Prior Knowledge</h4>
            <p>Certain truths can be known independently of sensory input through pure reason.</p>
            
            <h4>Deductive Reasoning</h4>
            <p>Truth is derived through logical inference from self-evident axioms and principles.</p>
            
            <h4>Mind-World Correspondence</h4>
            <p>The rational structure of mind mirrors the rational structure of reality itself.</p>
        `,
        trueFalseQuestions: [
            { question: "Rationalism emphasizes experience as the primary source of knowledge.", answer: false },
            { question: "Universal Grammar is a key concept in rationalist language acquisition theory.", answer: true },
            { question: "The poverty of the stimulus argument supports empiricist approaches.", answer: false },
            { question: "Chomsky proposed that language acquisition is guided by innate principles.", answer: true },
            { question: "Second language learners have full access to Universal Grammar according to all rationalist theories.", answer: false },
            { question: "Rationalism posits that all knowledge comes from sensory experience.", answer: false },
            { question: "Descartes' 'cogito, ergo sum' exemplifies rationalist methodology.", answer: true },
            { question: "Rationalists view the mind as a tabula rasa (blank slate).", answer: false },
            { question: "Parameter setting in UG theory occurs through exposure to linguistic input.", answer: true },
            { question: "Empiricists argue that children receive sufficient positive evidence for grammatical constructions.", answer: true }
        ],
        mcqQuestions: [
            { question: "The innateness hypothesis suggests that:", options: ["All knowledge comes from experience", "Language learning requires explicit instruction", "Humans are born with innate language capacity", "Second languages are harder to learn than first languages"], answer: 2 },
            { question: "According to rationalist theory, children acquire language because:", options: ["They receive extensive correction", "They have access to Universal Grammar", "They imitate adult speech", "They are explicitly taught grammar rules"], answer: 1 },
            { question: "The main challenge to rationalism in SLA comes from:", options: ["Generative grammar", "Empiricist approaches", "Cognitive psychology", "Neurolinguistics"], answer: 1 },
            { question: "Which philosopher is NOT associated with rationalism?", options: ["Descartes", "Spinoza", "Locke", "Leibniz"], answer: 2 },
            { question: "What does UG stand for in language acquisition theory?", options: ["Universal Grammar", "Understanding Generation", "Usage-based Grammar", "Unified Grammar"], answer: 0 },
            { question: "According to rationalists, what is the role of input in language acquisition?", options: ["It provides all necessary knowledge", "It triggers parameter setting", "It is unnecessary for acquisition", "It must be explicitly instructional"], answer: 1 },
            { question: "What is a priori knowledge?", options: ["Knowledge from experience", "Knowledge independent of experience", "Practical knowledge", "Incorrect knowledge"], answer: 1 },
            { question: "Which concept challenges the poverty of the stimulus argument?", options: ["Parameter setting", "Richness of input", "Innate ideas", "Deductive reasoning"], answer: 1 },
            { question: "What does the 'steady state' refer to in UG theory?", options: ["Initial linguistic knowledge", "Mature linguistic competence", "Language learning plateau", "Bilingual equilibrium"], answer: 1 },
            { question: "Which researcher is associated with usage-based challenges to rationalism?", options: ["Chomsky", "Tomasello", "Krashen", "Selinker"], answer: 1 }
        ],
        keyConcepts: [
            { title: "Rationalism", content: "The philosophical tradition that privileges reason as the primary source of knowledge, emphasizing innate ideas and deductive reasoning." },
            { title: "Innate Ideas", content: "The rationalist concept that certain knowledge exists prior to experience, hardwired into human cognitive architecture." },
            { title: "A Priori Knowledge", content: "Knowledge that exists independent of sensory experience, knowable through reason alone according to rationalists." },
            { title: "Deductive Reasoning", content: "The process of deriving specific truths from general principles through logical inference, central to rationalist methodology." },
            { title: "Universal Grammar (UG)", content: "Chomsky's rationalist theory that humans possess innate linguistic principles and parameters that guide language acquisition." }
        ]
    },
    4: {
        title: "Lecture 4: Signs of Progress",
        subtitle: "Interlanguage, developmental stages, and progress indicators",
        summary: `
            <h3>1. Understanding the Developmental Process</h3>
            <p>Second language acquisition is not an overnight phenomenon but rather a systematic developmental process. Like first language development in children, L2 learners progress through predictable stages, making characteristic errors that actually signal cognitive growth.</p>
            
            <h3>2. What is Interlanguage?</h3>
            <p>Interlanguage refers to the dynamic linguistic system that L2 learners construct as they acquire a new language. This system is:</p>
            <ul>
                <li><strong>Systematic</strong> ‚Äì follows internal rules, not random</li>
                <li><strong>Transitional</strong> ‚Äì constantly evolving toward target language</li>
                <li><strong>Variable</strong> ‚Äì changes based on context and complexity</li>
                <li><strong>Unique</strong> ‚Äì distinct from both L1 and L2</li>
            </ul>
            
            <h3>3. Selinker's Interlanguage Theory</h3>
            <p>Larry Selinker introduced the term interlanguage in 1972, revolutionizing our understanding of L2 development. His theory identifies five central processes that shape interlanguage:</p>
            <ol>
                <li><strong>Language Transfer:</strong> Influence from L1 structures and patterns</li>
                <li><strong>Transfer of Training:</strong> Impact of instructional methods and materials</li>
                <li><strong>Learning Strategies:</strong> Conscious approaches to acquiring language</li>
                <li><strong>Communication Strategies:</strong> Techniques for maintaining interaction despite limitations</li>
                <li><strong>Overgeneralization:</strong> Extending target language rules beyond appropriate contexts</li>
            </ol>
        `,
        trueFalseQuestions: [
            { question: "Interlanguage is a random collection of errors without systematic patterns.", answer: false },
            { question: "Overgeneralization errors indicate that learners are actively testing language rules.", answer: true },
            { question: "U-shaped development shows permanent regression in language ability.", answer: false },
            { question: "Self-correction demonstrates developing metalinguistic awareness.", answer: true },
            { question: "Interlanguage is a static system that doesn't change over time.", answer: false },
            { question: "Increased complexity in learner language always indicates perfect acquisition.", answer: false },
            { question: "Variability reduction shows that performance is becoming more consistent.", answer: true },
            { question: "Productive use refers only to memorizing and repeating phrases.", answer: false },
            { question: "Selinker identified three main processes in interlanguage development.", answer: false },
            { question: "Language transfer only involves positive influences from L1 to L2.", answer: false }
        ],
        mcqQuestions: [
            { question: "Who introduced the term 'interlanguage'?", options: ["Noam Chomsky", "Stephen Krashen", "Larry Selinker", "Merrill Swain"], answer: 2 },
            { question: "Which of these is NOT a characteristic of interlanguage?", options: ["Systematic", "Static", "Transitional", "Variable"], answer: 1 },
            { question: "What does U-shaped development refer to?", options: ["Constant improvement", "Temporary regression followed by improvement", "Plateau in learning", "Sudden breakthrough"], answer: 1 },
            { question: "Which sign of progress involves applying rules too broadly?", options: ["Self-correction", "Overgeneralization", "Variability reduction", "Productive use"], answer: 1 },
            { question: "What does increased complexity in learner language demonstrate?", options: ["Perfect acquisition", "Risk-taking and expansion", "Fossilization", "Language transfer"], answer: 1 },
            { question: "Which process involves influence from instructional methods?", options: ["Language transfer", "Transfer of training", "Overgeneralization", "Communication strategies"], answer: 1 },
            { question: "What does self-correction reveal about learners?", options: ["They are not paying attention", "Developing metalinguistic awareness", "They have fossilized", "They lack motivation"], answer: 1 },
            { question: "Which sign indicates more consistent performance across contexts?", options: ["Overgeneralization", "U-shaped development", "Variability reduction", "Productive use"], answer: 2 },
            { question: "What is productive use in language development?", options: ["Memorizing chunks", "Generating novel utterances", "Repeating teacher models", "Avoiding errors"], answer: 1 },
            { question: "How many central processes did Selinker identify in interlanguage theory?", options: ["3", "5", "7", "9"], answer: 1 }
        ],
        keyConcepts: [
            { title: "Interlanguage", content: "The dynamic linguistic system L2 learners construct, systematic and evolving, distinct from both L1 and L2, representing the learner's interim grammar." },
            { title: "Selinker's Interlanguage Theory", content: "Larry Selinker's 1972 theory identifying five central processes shaping interlanguage: language transfer, transfer of training, learning strategies, communication strategies, and overgeneralization." },
            { title: "Language Transfer", content: "The influence of L1 structures and patterns on L2 learning, which can be positive (facilitating) or negative (causing interference)." },
            { title: "Transfer of Training", content: "The impact of instructional methods, materials, and classroom experiences on the development of interlanguage." },
            { title: "Overgeneralization", content: "Extending target language rules beyond appropriate contexts (e.g., 'goed' instead of 'went'), indicating active rule learning." }
        ]
    },
    5: {
        title: "Lecture 5: SLA Theories",
        subtitle: "Major hypotheses and theoretical frameworks",
        summary: `
            <h3>SLA Hypotheses and Theories</h3>
            <p>Second Language Acquisition research has produced several influential hypotheses and theories that attempt to explain how learners acquire additional languages. These theories provide different perspectives on the cognitive, social, and psychological dimensions of language learning.</p>
            
            <h4>Universal Grammar (UG) Hypothesis</h4>
            <p>Core idea: Humans possess innate universal language rules that guide acquisition. Criticisms: Questions about innateness and applicability for adult learners. Instructional focus: Encourage pattern discovery, compare L1 vs L2 structures.</p>
            
            <h4>Input Hypothesis (Krashen)</h4>
            <p>Core idea: Comprehensible input (i+1) drives language learning. Criticisms: Testability issues and clarity about what constitutes comprehensible input. Instructional focus: Use meaningful, authentic input materials slightly above learner level.</p>
            
            <h4>Interaction Hypothesis (Long)</h4>
            <p>Core idea: Social interaction and negotiation of meaning enhance language learning. Criticisms: Questions about the role of negotiation and social context. Instructional focus: Promote interaction through group discussions and collaborative tasks.</p>
            
            <h4>Output Hypothesis (Swain)</h4>
            <p>Core idea: Language production (output) aids learning through noticing gaps and hypothesis testing. Criticisms: Questions about feedback effects and production practice. Instructional focus: Provide ample speaking and writing opportunities with feedback.</p>
        `,
        trueFalseQuestions: [
            { question: "The Input Hypothesis emphasizes that output is the primary driver of language acquisition.", answer: false },
            { question: "Universal Grammar proposes that humans are born with innate language structures.", answer: true },
            { question: "The Affective Filter Hypothesis suggests emotions have no impact on language learning.", answer: false },
            { question: "The Interaction Hypothesis emphasizes the importance of social interaction in learning.", answer: true },
            { question: "The Critical Period Hypothesis states that adults can achieve native-like proficiency as easily as children.", answer: false },
            { question: "The Output Hypothesis was proposed by Stephen Krashen.", answer: false },
            { question: "Comprehensible input refers to language that is slightly above the learner's current level.", answer: true },
            { question: "The Monitor Hypothesis is part of Krashen's five hypotheses.", answer: true },
            { question: "The Critical Period Hypothesis suggests there is no age-related decline in language learning ability.", answer: false },
            { question: "The Affective Filter can block input from reaching the language acquisition device.", answer: true }
        ],
        mcqQuestions: [
            { question: "Who proposed the Input Hypothesis?", options: ["Noam Chomsky", "Stephen Krashen", "Merrill Swain", "Michael Long"], answer: 1 },
            { question: "What does 'i+1' represent in Krashen's Input Hypothesis?", options: ["Input plus one word", "The learner's current level plus one", "One hour of study", "One language skill"], answer: 1 },
            { question: "Which hypothesis emphasizes the role of output in language learning?", options: ["Input Hypothesis", "Output Hypothesis", "Interaction Hypothesis", "Affective Filter Hypothesis"], answer: 1 },
            { question: "What does the Affective Filter Hypothesis focus on?", options: ["Grammar instruction", "Emotional factors in learning", "Social interaction", "Innate language capacity"], answer: 1 },
            { question: "Which hypothesis suggests a biological limit on native-like L2 acquisition?", options: ["Input Hypothesis", "Critical Period Hypothesis", "Monitor Hypothesis", "Interaction Hypothesis"], answer: 1 },
            { question: "Who proposed the Universal Grammar theory?", options: ["Stephen Krashen", "Noam Chomsky", "Merrill Swain", "Larry Selinker"], answer: 1 },
            { question: "Which hypothesis emphasizes negotiation of meaning during interaction?", options: ["Input Hypothesis", "Output Hypothesis", "Interaction Hypothesis", "Monitor Hypothesis"], answer: 2 },
            { question: "What is the main criticism of the Input Hypothesis?", options: ["It ignores social factors", "It's difficult to test empirically", "It overemphasizes output", "It denies innate factors"], answer: 1 },
            { question: "Which hypothesis includes the 'noticing function' as a key component?", options: ["Input Hypothesis", "Output Hypothesis", "Affective Filter Hypothesis", "Critical Period Hypothesis"], answer: 1 },
            { question: "What does UG stand for in SLA theories?", options: ["Universal Grammar", "Understanding Generation", "Usage Guidelines", "Unified Grammar"], answer: 0 }
        ],
        keyConcepts: [
            { title: "Universal Grammar (UG) Hypothesis", content: "Chomsky's theory that humans possess innate linguistic principles and parameters that guide language acquisition across all languages." },
            { title: "Input Hypothesis", content: "Krashen's proposal that language acquisition occurs through comprehensible input (i+1) that is slightly above the learner's current level." },
            { title: "Interaction Hypothesis", content: "Long's theory that language acquisition is enhanced through social interaction and negotiation of meaning, building on Vygotsky's sociocultural theory." },
            { title: "Output Hypothesis", content: "Swain's proposal that producing language (output) serves critical functions in acquisition: noticing gaps, hypothesis testing, and metalinguistic reflection." },
            { title: "Affective Filter Hypothesis", content: "Krashen's concept that emotional factors like anxiety, motivation, and self-confidence can raise a 'filter' that blocks input from reaching the language acquisition device." }
        ]
    }
};

        // DOM Elements
        const themeToggle = document.getElementById('themeToggle');
        const titleCards = document.querySelectorAll('.title-card');
        const backToTopBtn = document.getElementById('backToTop');
        
        // Content sections
        const homeContent = document.getElementById('home-content');
        const lectureContent = document.getElementById('lecture-content');
        const finalQuizContent = document.getElementById('final-quiz-content');
        
        // Current state
        let currentLecture = 1;
        let finalQuizQuestions = [];
        let userFinalAnswers = [];

        // Initialize the page
        function initPage() {
            // Set up event listeners
            if (themeToggle) {
                themeToggle.addEventListener('click', toggleTheme);
            }
            
            // Title card navigation event listeners
            titleCards.forEach(card => {
                card.addEventListener('click', function() {
                    const section = this.getAttribute('data-section');
                    
                    // Update active states
                    titleCards.forEach(c => c.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Load the selected section
                    loadSection(section);
                    
                    // Scroll to top
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                });
            });
            
            // Home page button listeners
            const startLearningBtn = document.getElementById('startLearningBtn');
            const jumpToFinalQuizBtn = document.getElementById('jumpToFinalQuizBtn');
            
            if (startLearningBtn) {
                startLearningBtn.addEventListener('click', function() {
                    document.querySelector('.title-card[data-section="lecture1"]').click();
                });
            }
            
            if (jumpToFinalQuizBtn) {
                jumpToFinalQuizBtn.addEventListener('click', function() {
                    document.querySelector('.title-card[data-section="final-quiz"]').click();
                });
            }
            
            // Back to top button
            if (backToTopBtn) {
                backToTopBtn.addEventListener('click', function() {
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                });
                
                // Show/hide back to top button on scroll
                window.addEventListener('scroll', function() {
                    if (window.scrollY > 300) {
                        backToTopBtn.classList.add('visible');
                    } else {
                        backToTopBtn.classList.remove('visible');
                    }
                });
            }
            
            // Set initial theme
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'dark') {
                document.body.classList.add('dark-theme');
                updateThemeButton(true);
            }
            
            // Set up final quiz functionality
            setupFinalQuiz();
        }
        
        // Set up final quiz functionality
        function setupFinalQuiz() {
            setTimeout(() => {
                const startFinalQuizBtn = document.getElementById('startFinalQuiz');
                const resetFinalQuizBtn = document.getElementById('resetFinalQuiz');
                const submitFinalQuizBtn = document.getElementById('submitFinalQuiz');
                const toggleFinalQuizInfoBtn = document.getElementById('toggleFinalQuizInfo');
                const finalQuizInfo = document.getElementById('finalQuizInfo');
                
                if (toggleFinalQuizInfoBtn && finalQuizInfo) {
                    toggleFinalQuizInfoBtn.addEventListener('click', function() {
                        finalQuizInfo.classList.toggle('hidden');
                    });
                }
                
                if (startFinalQuizBtn) {
                    startFinalQuizBtn.addEventListener('click', function() {
                        startFinalQuiz();
                    });
                }
                
                if (submitFinalQuizBtn) {
                    submitFinalQuizBtn.addEventListener('click', function() {
                        submitFinalQuiz();
                    });
                }
                
                if (resetFinalQuizBtn) {
                    resetFinalQuizBtn.addEventListener('click', function() {
                        resetFinalQuiz();
                    });
                }
            }, 100);
        }
        
        // Start the final quiz
        function startFinalQuiz() {
            // Get all questions from all lectures
            const allQuestions = [];
            
            for (let lectureNum = 1; lectureNum <= 5; lectureNum++) {
                const lecture = lecturesData[lectureNum];
                
                // Add true/false questions
                lecture.trueFalseQuestions.forEach((q, index) => {
                    allQuestions.push({
                        lecture: lectureNum,
                        type: 'tf',
                        question: q.question,
                        answer: q.answer,
                        options: ['True', 'False'],
                        lectureTitle: lecture.title
                    });
                });
                
                // Add MCQ questions
                lecture.mcqQuestions.forEach((q, index) => {
                    allQuestions.push({
                        lecture: lectureNum,
                        type: 'mcq',
                        question: q.question,
                        answer: q.answer,
                        options: q.options,
                        lectureTitle: lecture.title
                    });
                });
            }
            
            // Shuffle and select 10 random questions
            finalQuizQuestions = [...allQuestions]
                .sort(() => 0.5 - Math.random())
                .slice(0, 10);
            
            userFinalAnswers = new Array(10).fill(null);
            
            // Display the quiz
            const quizContainer = document.getElementById('finalQuizContainer');
            const startBtn = document.getElementById('startFinalQuiz');
            const submitBtn = document.getElementById('submitFinalQuiz');
            const progressBar = document.getElementById('finalQuizProgress');
            
            if (quizContainer) {
                let quizHTML = '';
                
                finalQuizQuestions.forEach((q, index) => {
                    const lectureAbbr = `L${q.lecture}`;
                    
                    quizHTML += `
                        <div class="final-question" data-question-index="${index}">
                            <div class="question-meta">
                                <div class="question-number">Question ${index + 1}/10</div>
                                <div class="question-lecture">${lectureAbbr}: ${q.lectureTitle.split(':')[0]}</div>
                            </div>
                            <div class="question-text">${q.question}</div>
                            <div class="options-container">
                    `;
                    
                    q.options.forEach((option, optIndex) => {
                        const value = q.type === 'tf' ? (optIndex === 0 ? 'true' : 'false') : optIndex;
                        quizHTML += `
                            <div class="option" data-answer="${value}">
                                <input type="radio" name="q${index}" value="${value}">
                                <label>${option}</label>
                            </div>
                        `;
                    });
                    
                    quizHTML += `
                            </div>
                        </div>
                    `;
                });
                
                quizContainer.innerHTML = quizHTML;
                
                // Add click handlers to options
                setTimeout(() => {
                    document.querySelectorAll('.final-question .option').forEach(option => {
                        option.addEventListener('click', function() {
                            const questionCard = this.closest('.final-question');
                            const questionIndex = parseInt(questionCard.getAttribute('data-question-index'));
                            
                            // Clear previous selection for this question
                            questionCard.querySelectorAll('.option').forEach(opt => {
                                opt.classList.remove('selected');
                            });
                            
                            // Select this option
                            this.classList.add('selected');
                            this.querySelector('input').checked = true;
                            
                            // Store the answer
                            userFinalAnswers[questionIndex] = this.getAttribute('data-answer');
                            
                            // Update progress
                            updateFinalQuizProgress();
                        });
                    });
                }, 50);
            }
            
            // Show/hide buttons
            if (startBtn) startBtn.style.display = 'none';
            if (submitBtn) submitBtn.style.display = 'inline-flex';
            if (progressBar) progressBar.style.width = '0%';
            
            // Hide results if showing
            document.getElementById('finalQuizResults')?.classList.add('hidden');
            
            // Scroll to quiz
            document.getElementById('finalQuizContainer').scrollIntoView({ behavior: 'smooth' });
        }
        
        // Update final quiz progress
        function updateFinalQuizProgress() {
            const answeredCount = userFinalAnswers.filter(answer => answer !== null).length;
            const progress = (answeredCount / 10) * 100;
            const progressBar = document.getElementById('finalQuizProgress');
            
            if (progressBar) {
                progressBar.style.width = `${progress}%`;
            }
        }
        
        // Submit final quiz
        function submitFinalQuiz() {
            let score = 0;
            let resultsHTML = '';
            let recommendations = new Set();
            let lectureScores = {1: 0, 2: 0, 3: 0, 4: 0, 5: 0};
            let lectureCounts = {1: 0, 2: 0, 3: 0, 4: 0, 5: 0};
            
            // Calculate scores
            finalQuizQuestions.forEach((q, index) => {
                const userAnswer = userFinalAnswers[index];
                let isCorrect = false;
                
                if (userAnswer !== null) {
                    if (q.type === 'tf') {
                        isCorrect = (userAnswer === 'true') === q.answer;
                    } else {
                        isCorrect = parseInt(userAnswer) === q.answer;
                    }
                    
                    if (isCorrect) {
                        score++;
                        lectureScores[q.lecture]++;
                    }
                }
                
                lectureCounts[q.lecture]++;
                
                // Build result item HTML
                const userAnswerText = userAnswer === null ? 'Not answered' : 
                    q.type === 'tf' ? (userAnswer === 'true' ? 'True' : 'False') : 
                    q.options[parseInt(userAnswer)];
                    
                const correctAnswerText = q.type === 'tf' ? 
                    (q.answer ? 'True' : 'False') : 
                    q.options[q.answer];
                
                resultsHTML += `
                    <div class="result-item ${isCorrect ? 'correct' : 'incorrect'}">
                        <div class="result-question">Q${index + 1}: ${q.question}</div>
                        <div class="result-answer user-answer">Your answer: ${userAnswerText}</div>
                        <div class="result-answer correct-answer">Correct answer: ${correctAnswerText}</div>
                        <div class="question-lecture" style="margin-top: 8px; font-size: 0.8rem;">
                            From: Lecture ${q.lecture}
                        </div>
                    </div>
                `;
            });
            
            // Calculate percentage and determine recommendations
            const percentage = (score / 10) * 100;
            
            // Check which lectures need review (score less than 50% on that lecture's questions)
            for (let lectureNum = 1; lectureNum <= 5; lectureNum++) {
                if (lectureCounts[lectureNum] > 0) {
                    const lecturePercentage = (lectureScores[lectureNum] / lectureCounts[lectureNum]) * 100;
                    if (lecturePercentage < 50) {
                        recommendations.add(`Lecture ${lectureNum}: ${lecturesData[lectureNum].title.split(':')[0]}`);
                    }
                }
            }
            
            // If overall score is low, recommend reviewing all lectures
            if (percentage < 70) {
                if (recommendations.size === 0) {
                    recommendations.add('All lectures - Consider reviewing the entire module');
                }
            }
            
            // Build recommendations HTML
            let recommendationsHTML = '';
            if (recommendations.size > 0) {
                recommendations.forEach(rec => {
                    recommendationsHTML += `<li>${rec}</li>`;
                });
            } else {
                recommendationsHTML = '<li>Excellent performance! No specific recommendations.</li>';
            }
            
            // Determine feedback message
            let feedbackMessage = '';
            if (percentage >= 90) {
                feedbackMessage = 'Outstanding! You have mastered the SLA module content.';
            } else if (percentage >= 80) {
                feedbackMessage = 'Excellent work! You have a strong understanding of the material.';
            } else if (percentage >= 70) {
                feedbackMessage = 'Good job! You have a solid grasp of the key concepts.';
            } else if (percentage >= 60) {
                feedbackMessage = 'Satisfactory. Consider reviewing some key areas.';
            } else if (percentage >= 50) {
                feedbackMessage = 'Needs improvement. Review the recommended lectures.';
            } else {
                feedbackMessage = 'Needs significant review. Focus on the fundamental concepts.';
            }
            
            // Display results
            const resultsContainer = document.getElementById('finalQuizResults');
            if (resultsContainer) {
                resultsContainer.innerHTML = `
                    <div class="results-header">
                        <h3>Final Quiz Results</h3>
                        <div class="score">${score}/10 (${percentage.toFixed(1)}%)</div>
                    </div>
                    <div class="feedback">
                        <p><strong>Overall Feedback:</strong> ${feedbackMessage}</p>
                        <p><strong>Performance Summary:</strong> You answered ${score} out of 10 questions correctly.</p>
                        
                        <div class="result-details">
                            <h4 style="margin-bottom: 16px;">Detailed Results:</h4>
                            ${resultsHTML}
                        </div>
                        
                        <div style="margin-top: 24px; padding-top: 16px; border-top: 1px solid var(--border-color);">
                            <p><strong>Recommendations:</strong> Based on your performance:</p>
                            <ul style="margin-left: 20px; margin-top: 8px;">
                                ${recommendationsHTML}
                            </ul>
                        </div>
                        
                        <div class="quiz-actions" style="margin-top: 24px;">
                            <button class="btn btn-secondary" id="retakeFinalQuiz">
                                <i class="fas fa-redo"></i> Retake Final Quiz
                            </button>
                            <button class="btn btn-primary" onclick="document.querySelector('.title-card[data-section=\\'home\\']').click()">
                                <i class="fas fa-home"></i> Return to Home
                            </button>
                        </div>
                    </div>
                `;
                
                resultsContainer.classList.remove('hidden');
                
                // Add retake quiz button handler
                document.getElementById('retakeFinalQuiz')?.addEventListener('click', function() {
                    startFinalQuiz();
                });
                
                // Scroll to results
                resultsContainer.scrollIntoView({ behavior: 'smooth' });
            }
            
            // Hide submit button
            document.getElementById('submitFinalQuiz').style.display = 'none';
        }
        
        // Reset final quiz
        function resetFinalQuiz() {
            const quizContainer = document.getElementById('finalQuizContainer');
            const startBtn = document.getElementById('startFinalQuiz');
            const submitBtn = document.getElementById('submitFinalQuiz');
            const resultsContainer = document.getElementById('finalQuizResults');
            const progressBar = document.getElementById('finalQuizProgress');
            
            if (quizContainer) quizContainer.innerHTML = '<p>Click "Start Final Quiz" to begin your comprehensive assessment.</p>';
            if (startBtn) startBtn.style.display = 'inline-flex';
            if (submitBtn) submitBtn.style.display = 'none';
            if (resultsContainer) resultsContainer.classList.add('hidden');
            if (progressBar) progressBar.style.width = '0%';
            
            finalQuizQuestions = [];
            userFinalAnswers = [];
        }
        
        // Load a section
        function loadSection(sectionId) {
            // Hide all sections first
            homeContent.classList.add('hidden');
            lectureContent.classList.add('hidden');
            finalQuizContent.classList.add('hidden');
            
            switch(sectionId) {
                case 'home':
                    homeContent.classList.remove('hidden');
                    break;
                case 'lecture1':
                case 'lecture2':
                case 'lecture3':
                case 'lecture4':
                case 'lecture5':
                    const lectureNum = parseInt(sectionId.replace('lecture', ''));
                    currentLecture = lectureNum;
                    loadLecture(lectureNum);
                    lectureContent.classList.remove('hidden');
                    break;
                case 'final-quiz':
                    finalQuizContent.classList.remove('hidden');
                    break;
            }
        }
        
        // Toggle theme (light/dark)
        function toggleTheme() {
            const isDark = document.body.classList.contains('dark-theme');
            
            if (isDark) {
                document.body.classList.remove('dark-theme');
                localStorage.setItem('theme', 'light');
            } else {
                document.body.classList.add('dark-theme');
                localStorage.setItem('theme', 'dark');
            }
            
            updateThemeButton(!isDark);
        }
        
        function updateThemeButton(isDark) {
            const icon = isDark ? '<i class="fas fa-sun"></i>' : '<i class="fas fa-moon"></i>';
            const text = isDark ? 'Light Mode' : 'Dark Mode';
            
            if (themeToggle) themeToggle.innerHTML = `${icon} ${text}`;
        }
        
        // Load a lecture into the content area
        function loadLecture(lectureNum) {
            const lecture = lecturesData[lectureNum];
            if (!lecture) return;
            
            // Create lecture content HTML
            const contentHTML = `
                <div class="page-header">
                    <h2>${lecture.title}</h2>
                    <p>${lecture.subtitle}</p>
                </div>
                
                <div class="content-section">
                    <div class="section-header">
                        <h3 class="section-title">Summary</h3>
                    </div>
                    
                    <div class="summary-content">
                        ${lecture.summary}
                    </div>
                </div>
                
                <div class="content-section">
                    <div class="section-header">
                        <h3 class="section-title">Quiz</h3>
                        <button class="toggle-btn" id="toggleQuizInfo">
                            <i class="fas fa-info-circle"></i> Instructions
                        </button>
                    </div>
                    
                    <div class="quiz-info hidden" id="quizInfo">
                        <p><strong>Instructions:</strong> Each quiz contains True/False and Multiple Choice questions. You'll receive immediate feedback after submission.</p>
                    </div>
                    
                    <div class="quiz-actions" style="margin-bottom: 20px;">
                        <button class="btn btn-secondary" id="takeTFQuiz">
                            <i class="fas fa-check-circle"></i> True/False Quiz (5 questions)
                        </button>
                        <button class="btn btn-secondary" id="takeMCQQuiz">
                            <i class="fas fa-list-ol"></i> MCQ Quiz (5 questions)
                        </button>
                        <button class="btn btn-primary" id="resetQuiz">
                            <i class="fas fa-redo"></i> Reset Quiz
                        </button>
                    </div>
                    
                    <div class="quiz-container" id="quizContainer">
                        <p>Select a quiz type to begin.</p>
                    </div>
                    
                    <div class="quiz-actions">
                        <button class="btn btn-primary" id="submitQuiz" style="display: none;">
                            <i class="fas fa-paper-plane"></i> Submit Quiz
                        </button>
                    </div>
                    
                    <div class="results-container hidden" id="quizResults">
                        <!-- Results will be displayed here -->
                    </div>
                </div>
                
                <div class="content-section">
                    <div class="section-header">
                        <h3 class="section-title">Key Concepts</h3>
                    </div>
                    
                    <div class="concepts-grid" id="conceptsGrid">
                        ${lecture.keyConcepts.map((concept, index) => `
                            <div class="concept-card">
                                <div class="concept-header">
                                    <div class="concept-number">${index + 1}</div>
                                    <div class="concept-title">${concept.title}</div>
                                    <button class="concept-toggle">
                                        <i class="fas fa-chevron-down"></i>
                                    </button>
                                </div>
                                <div class="concept-content">
                                    <p>${concept.content}</p>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
            
            lectureContent.innerHTML = contentHTML;
            
            // Set up event listeners for concept cards
            setTimeout(() => {
                document.querySelectorAll('.concept-toggle').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const content = this.closest('.concept-card').querySelector('.concept-content');
                        const icon = this.querySelector('i');
                        
                        if (content.classList.contains('show')) {
                            content.classList.remove('show');
                            icon.classList.remove('fa-chevron-up');
                            icon.classList.add('fa-chevron-down');
                        } else {
                            content.classList.add('show');
                            icon.classList.remove('fa-chevron-down');
                            icon.classList.add('fa-chevron-up');
                        }
                    });
                });
                
                // Set up quiz info toggle
                const toggleQuizInfo = document.getElementById('toggleQuizInfo');
                const quizInfo = document.getElementById('quizInfo');
                
                if (toggleQuizInfo && quizInfo) {
                    toggleQuizInfo.addEventListener('click', function() {
                        quizInfo.classList.toggle('hidden');
                    });
                }
                
                // Set up quiz buttons
                setupQuizButtons(lecture);
            }, 100);
        }
        
        // Set up quiz buttons for a lecture
        function setupQuizButtons(lecture) {
            const takeTFQuizBtn = document.getElementById('takeTFQuiz');
            const takeMCQQuizBtn = document.getElementById('takeMCQQuiz');
            const resetQuizBtn = document.getElementById('resetQuiz');
            
            if (takeTFQuizBtn) {
                takeTFQuizBtn.addEventListener('click', function() {
                    startQuiz(lecture.trueFalseQuestions, 'tf');
                });
            }
            
            if (takeMCQQuizBtn) {
                takeMCQQuizBtn.addEventListener('click', function() {
                    startQuiz(lecture.mcqQuestions, 'mcq');
                });
            }
            
            if (resetQuizBtn) {
                resetQuizBtn.addEventListener('click', function() {
                    resetQuiz();
                });
            }
        }
        
        // Start a quiz
        function startQuiz(questions, type) {
            const quizContainer = document.getElementById('quizContainer');
            const submitBtn = document.getElementById('submitQuiz');
            
            if (!quizContainer) return;
            
            // Get 5 random questions
            const shuffledQuestions = [...questions].sort(() => 0.5 - Math.random()).slice(0, 5);
            
            let quizHTML = '';
            
            shuffledQuestions.forEach((q, index) => {
                quizHTML += `
                    <div class="question-card" data-question-index="${index}">
                        <div class="question-text">${index + 1}. ${q.question}</div>
                        <div class="options-container">
                `;
                
                if (type === 'tf') {
                    quizHTML += `
                        <div class="option" data-answer="true">
                            <input type="radio" name="q${index}" value="true">
                            <label>True</label>
                        </div>
                        <div class="option" data-answer="false">
                            <input type="radio" name="q${index}" value="false">
                            <label>False</label>
                        </div>
                    `;
                } else {
                    q.options.forEach((option, optIndex) => {
                        quizHTML += `
                            <div class="option" data-answer="${optIndex}">
                                <input type="radio" name="q${index}" value="${optIndex}">
                                <label>${option}</label>
                            </div>
                        `;
                    });
                }
                
                quizHTML += `
                        </div>
                    </div>
                `;
            });
            
            quizContainer.innerHTML = quizHTML;
            
            if (submitBtn) {
                submitBtn.style.display = 'inline-flex';
                submitBtn.onclick = function() {
                    showQuizResults(shuffledQuestions, type);
                };
            }
            
            // Add click handlers to options
            setTimeout(() => {
                document.querySelectorAll('.option').forEach(option => {
                    option.addEventListener('click', function() {
                        // Clear previous selection for this question
                        const questionCard = this.closest('.question-card');
                        questionCard.querySelectorAll('.option').forEach(opt => {
                            opt.classList.remove('selected');
                        });
                        
                        // Select this option
                        this.classList.add('selected');
                        this.querySelector('input').checked = true;
                    });
                });
            }, 50);
        }
        
        // Show quiz results
        function showQuizResults(questions, type) {
            let score = 0;
            let resultsHTML = '';
            
            questions.forEach((q, index) => {
                const questionCard = document.querySelector(`.question-card[data-question-index="${index}"]`);
                const selectedOption = questionCard?.querySelector('.option.selected');
                const userAnswer = selectedOption?.getAttribute('data-answer');
                
                let isCorrect = false;
                if (type === 'tf') {
                    isCorrect = (userAnswer === 'true') === q.answer;
                } else {
                    isCorrect = parseInt(userAnswer) === q.answer;
                }
                
                if (isCorrect) score++;
                
                // Update UI for this question
                if (selectedOption) {
                    selectedOption.classList.add(isCorrect ? 'correct' : 'incorrect');
                }
                
                // Build results HTML
                resultsHTML += `
                    <div style="margin-bottom: 12px; padding-bottom: 12px; border-bottom: 1px solid var(--border-color);">
                        <p><strong>Question ${index + 1}:</strong> ${q.question}</p>
                        <p style="color: ${isCorrect ? 'var(--success-color)' : 'var(--accent-color)'};">
                            ${isCorrect ? '‚úì Correct' : '‚úó Incorrect'}
                        </p>
                    </div>
                `;
            });
            
            // Display results
            const resultsContainer = document.getElementById('quizResults');
            if (resultsContainer) {
                resultsContainer.innerHTML = `
                    <div class="results-header">
                        <h3>Quiz Results</h3>
                        <div class="score">Score: ${score}/5 (${(score/5*100).toFixed(0)}%)</div>
                    </div>
                    <div class="feedback">
                        ${resultsHTML}
                        <p style="margin-top: 12px;">
                            <strong>Feedback:</strong> ${getFeedbackMessage(score)}
                        </p>
                    </div>
                `;
                resultsContainer.classList.remove('hidden');
            }
            
            // Hide submit button
            const submitBtn = document.getElementById('submitQuiz');
            if (submitBtn) {
                submitBtn.style.display = 'none';
            }
        }
        
        // Get feedback message based on score
        function getFeedbackMessage(score) {
            if (score === 5) return "Excellent! You have a strong understanding of this material.";
            if (score >= 3) return "Good job! You understand most of the key concepts.";
            return "You might want to review the material before trying again.";
        }
        
        // Reset quiz
        function resetQuiz() {
            const quizContainer = document.getElementById('quizContainer');
            const resultsContainer = document.getElementById('quizResults');
            const submitBtn = document.getElementById('submitQuiz');
            
            if (quizContainer) quizContainer.innerHTML = '<p>Select a quiz type to begin.</p>';
            if (resultsContainer) resultsContainer.classList.add('hidden');
            if (submitBtn) submitBtn.style.display = 'none';
        }
        
        // Make loadSection function available globally for onclick handlers
        window.loadSection = loadSection;
        
        // Initialize the page when DOM is loaded
        document.addEventListener('DOMContentLoaded', initPage);
    </script>
</body>
</html>
