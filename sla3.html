<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SLA Module - University Platform</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            /* Modern Academic Theme - Clean & Professional */
            --primary-color: #1a56db;
            --secondary-color: #3730a3;
            --accent-color: #dc2626;
            --accent-secondary: #0891b2;
            --background-color: #f8fafc;
            --surface-color: #ffffff;
            --text-color: #1e293b;
            --text-secondary: #64748b;
            --border-color: #e2e8f0;
            --success-color: #059669;
            --warning-color: #d97706;
            --info-color: #2563eb;
            --shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            --shadow-lg: 0 8px 24px rgba(0, 0, 0, 0.12);
            --border-radius: 10px;
            --border-radius-sm: 6px;
            --transition: all 0.2s ease;
        }

        .dark-theme {
            /* Dark Theme - Academic Focus */
            --primary-color: #3b82f6;
            --secondary-color: #6366f1;
            --accent-color: #ef4444;
            --accent-secondary: #06b6d4;
            --background-color: #0f172a;
            --surface-color: #1e293b;
            --text-color: #f1f5f9;
            --text-secondary: #94a3b8;
            --border-color: #334155;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --info-color: #3b82f6;
            --shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
            --shadow-lg: 0 8px 24px rgba(0, 0, 0, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            transition: background-color 0.2s, border-color 0.2s;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            line-height: 1.6;
            min-height: 100vh;
        }

        /* Top Header Bar */
        .top-header {
            background-color: var(--primary-color);
            color: white;
            padding: 24px 30px;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: var(--shadow-lg);
        }

        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1400px;
            margin: 0 auto;
        }

        .header-brand h1 {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .header-brand p {
            font-size: 0.95rem;
            opacity: 0.9;
            line-height: 1.4;
        }

        .header-controls {
            display: flex;
            gap: 12px;
            align-items: center;
        }

        .theme-toggle {
            background-color: rgba(255, 255, 255, 0.15);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 10px 18px;
            border-radius: var(--border-radius-sm);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 500;
            transition: var(--transition);
        }

        .theme-toggle:hover {
            background-color: rgba(255, 255, 255, 0.25);
        }

        /* Direct Title Navigation */
        .title-navigation {
            background-color: var(--surface-color);
            border-bottom: 1px solid var(--border-color);
            padding: 16px 30px;
            position: sticky;
            top: 96px;
            z-index: 99;
            box-shadow: var(--shadow);
        }

        .title-nav-container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .title-nav-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 12px;
        }

        .title-card {
            background-color: var(--background-color);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius-sm);
            padding: 16px;
            cursor: pointer;
            transition: var(--transition);
            text-align: center;
        }

        .title-card:hover {
            transform: translateY(-2px);
            border-color: var(--primary-color);
            box-shadow: var(--shadow);
        }

        .title-card.active {
            border-color: var(--primary-color);
            background-color: rgba(26, 86, 219, 0.1);
            color: var(--primary-color);
        }

        .title-card h3 {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 4px;
            color: var(--primary-color);
        }

        .title-card p {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        /* Main Content Area */
        .main-content {
            padding: 30px;
            max-width: 1400px;
            margin: 0 auto;
        }

        .page-header {
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--border-color);
        }

        .page-header h2 {
            color: var(--primary-color);
            font-size: 2.2rem;
            font-weight: 800;
            margin-bottom: 8px;
        }

        .page-header p {
            font-size: 1.1rem;
            color: var(--text-secondary);
        }

        /* Content Sections */
        .content-section {
            background-color: var(--surface-color);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            padding: 30px;
            margin-bottom: 30px;
            border: 1px solid var(--border-color);
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 1px solid var(--border-color);
        }

        .section-title {
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--primary-color);
        }

        .toggle-btn {
            background: none;
            border: 1px solid var(--border-color);
            color: var(--text-color);
            padding: 8px 16px;
            border-radius: var(--border-radius-sm);
            cursor: pointer;
            font-size: 0.85rem;
            display: flex;
            align-items: center;
            gap: 6px;
            transition: var(--transition);
        }

        .toggle-btn:hover {
            background-color: rgba(26, 86, 219, 0.1);
        }

        /* Summary Section */
        .summary-content {
            line-height: 1.7;
            font-size: 1.05rem;
        }

        .summary-content h3 {
            margin-top: 24px;
            margin-bottom: 12px;
            color: var(--primary-color);
            font-size: 1.2rem;
            font-weight: 600;
        }

        .summary-content h4 {
            margin-top: 20px;
            margin-bottom: 10px;
            color: var(--secondary-color);
            font-size: 1.1rem;
            font-weight: 600;
        }

        .summary-content p {
            margin-bottom: 16px;
            color: var(--text-color);
        }

        .summary-content em {
            color: var(--accent-color);
            font-style: italic;
        }

        .summary-content ul, .summary-content ol {
            margin-left: 24px;
            margin-bottom: 16px;
        }

        .summary-content li {
            margin-bottom: 8px;
            color: var(--text-color);
        }

        /* Quiz Section */
        .quiz-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .quiz-info {
            background-color: rgba(26, 86, 219, 0.05);
            border-left: 4px solid var(--primary-color);
            padding: 16px;
            border-radius: var(--border-radius-sm);
        }

        .question-card {
            background-color: var(--background-color);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            padding: 24px;
            margin-bottom: 16px;
        }

        .question-text {
            font-weight: 600;
            margin-bottom: 16px;
            font-size: 1.1rem;
            color: var(--text-color);
        }

        .options-container {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .option {
            display: flex;
            align-items: center;
            padding: 12px 16px;
            background-color: var(--surface-color);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius-sm);
            cursor: pointer;
            transition: var(--transition);
        }

        .option:hover {
            border-color: var(--primary-color);
        }

        .option.selected {
            border-color: var(--primary-color);
            background-color: rgba(26, 86, 219, 0.1);
        }

        .option.correct {
            border-color: var(--success-color);
            background-color: rgba(5, 150, 105, 0.1);
        }

        .option.incorrect {
            border-color: var(--accent-color);
            background-color: rgba(220, 38, 38, 0.1);
        }

        .option input {
            margin-right: 12px;
            cursor: pointer;
        }

        .quiz-actions {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin-top: 24px;
        }

        .btn {
            padding: 12px 24px;
            border-radius: var(--border-radius-sm);
            border: none;
            cursor: pointer;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: var(--transition);
            font-size: 0.95rem;
        }

        .btn-primary {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--secondary-color);
        }

        .btn-secondary {
            background-color: var(--surface-color);
            color: var(--text-color);
            border: 1px solid var(--border-color);
        }

        .btn-secondary:hover {
            background-color: rgba(26, 86, 219, 0.1);
        }

        .results-container {
            background-color: var(--surface-color);
            border-radius: var(--border-radius);
            padding: 24px;
            margin-top: 24px;
            border: 1px solid var(--border-color);
        }

        .results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
            padding-bottom: 16px;
            border-bottom: 1px solid var(--border-color);
        }

        .score {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-color);
        }

        .feedback {
            margin-top: 16px;
            padding-top: 16px;
            border-top: 1px solid var(--border-color);
        }

        /* Key Concepts Section */
        .concepts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }

        .concept-card {
            background-color: var(--background-color);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            padding: 20px;
            cursor: pointer;
            transition: var(--transition);
        }

        .concept-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
            border-color: var(--primary-color);
        }

        .concept-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .concept-number {
            background-color: var(--primary-color);
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.85rem;
        }

        .concept-title {
            font-weight: 600;
            color: var(--primary-color);
            flex: 1;
            margin-left: 12px;
            font-size: 1.1rem;
        }

        .concept-toggle {
            background: none;
            border: none;
            color: var(--text-color);
            cursor: pointer;
            padding: 4px;
        }

        .concept-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
            color: var(--text-color);
            line-height: 1.6;
        }

        .concept-content.show {
            max-height: 500px;
        }

        /* Final Quiz Section */
        .lecture-selector {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin-bottom: 24px;
        }

        .lecture-checkbox {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background-color: var(--surface-color);
            border-radius: var(--border-radius-sm);
            border: 1px solid var(--border-color);
            transition: var(--transition);
        }

        .lecture-checkbox:hover {
            border-color: var(--primary-color);
        }

        .lecture-checkbox input {
            cursor: pointer;
        }

        .progress-bar {
            height: 8px;
            background-color: var(--border-color);
            border-radius: 4px;
            margin: 24px 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background-color: var(--primary-color);
            width: 0%;
            transition: width 0.3s ease;
        }

        /* Back to Top Button */
        .back-to-top {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background-color: var(--primary-color);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: var(--shadow-lg);
            z-index: 100;
            opacity: 0;
            transform: translateY(20px);
            transition: var(--transition);
        }

        .back-to-top.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .back-to-top:hover {
            background-color: var(--secondary-color);
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .concepts-grid {
                grid-template-columns: 1fr;
            }
            
            .content-section {
                padding: 20px;
                margin-bottom: 24px;
            }
            
            .quiz-actions {
                flex-direction: column;
                gap: 12px;
            }
            
            .btn {
                width: 100%;
                justify-content: center;
            }
            
            .main-content {
                padding: 20px;
            }
            
            .top-header {
                padding: 20px;
            }
            
            .title-navigation {
                padding: 12px 20px;
                top: 88px;
            }
            
            .title-nav-grid {
                grid-template-columns: 1fr;
            }
            
            .section-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 12px;
            }
            
            .toggle-btn {
                align-self: flex-start;
            }
            
            .lecture-selector {
                flex-direction: column;
                gap: 8px;
            }
            
            .page-header h2 {
                font-size: 1.6rem;
            }
            
            .header-brand h1 {
                font-size: 1.4rem;
            }
        }

        @media (max-width: 480px) {
            .main-content {
                padding: 16px;
            }
            
            .content-section {
                padding: 16px;
            }
            
            .top-header {
                padding: 16px;
            }
            
            .page-header h2 {
                font-size: 1.4rem;
            }
            
            .section-title {
                font-size: 1.2rem;
            }
            
            .back-to-top {
                bottom: 20px;
                right: 20px;
                width: 40px;
                height: 40px;
            }
        }

        /* Utility Classes */
        .hidden {
            display: none !important;
        }

        .show {
            display: block !important;
        }

        /* Scrollbar Styling */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--surface-color);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--border-color);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary-color);
        }
    </style>
</head>
<body class="light-theme">
    <!-- Top Header -->
    <header class="top-header">
        <div class="header-container">
            <div class="header-brand">
                <h1>Second Language Acquisition Module</h1>
                <p><strong>Instructor:</strong> M. Benabderahmane | <strong>Level:</strong> M1 | <strong>Total Lectures:</strong> 5</p>
            </div>
            
            <div class="header-controls">
                <button class="theme-toggle" id="themeToggle">
                    <i class="fas fa-moon"></i> Theme
                </button>
            </div>
        </div>
    </header>

    <!-- Direct Title Navigation -->
    <nav class="title-navigation">
        <div class="title-nav-container">
            <div class="title-nav-grid">
                <div class="title-card active" data-section="home">
                    <h3><i class="fas fa-home"></i> Module Home</h3>
                    <p>Course Overview & Structure</p>
                </div>
                <div class="title-card" data-section="lecture1">
                    <h3>Lecture 1</h3>
                    <p>Introduction to SLA</p>
                </div>
                <div class="title-card" data-section="lecture2">
                    <h3>Lecture 2</h3>
                    <p>Language Acquisition</p>
                </div>
                <div class="title-card" data-section="lecture3">
                    <h3>Lecture 3</h3>
                    <p>Rationalism</p>
                </div>
                <div class="title-card" data-section="lecture4">
                    <h3>Lecture 4</h3>
                    <p>Signs of Progress</p>
                </div>
                <div class="title-card" data-section="lecture5">
                    <h3>Lecture 5</h3>
                    <p>SLA Theories</p>
                </div>
                <div class="title-card" data-section="final-quiz">
                    <h3><i class="fas fa-tasks"></i> Final Quiz</h3>
                    <p>Comprehensive Assessment</p>
                </div>
            </div>
        </div>
    </nav>
    
    <!-- Main Content Area -->
    <main class="main-content">
        <!-- Home Content (Default) -->
        <section id="home-content">
            <div class="page-header">
                <h2>Welcome to the SLA Module</h2>
                <p>Master the fundamentals of Second Language Acquisition through this comprehensive learning platform</p>
            </div>
            
            <div class="content-section">
                <div class="section-header">
                    <h3 class="section-title">Module Overview</h3>
                </div>
                
                <div class="summary-content">
                    <p>This interactive platform is designed for the <strong>M1 Second Language Acquisition module</strong> taught by <strong>M. Benabderahmane</strong>. The module covers fundamental theories, concepts, and research in the field of Second Language Acquisition (SLA).</p>
                    
                    <h3>Module Structure</h3>
                    <p>The module consists of five comprehensive lectures:</p>
                    <ol>
                        <li><strong>Introduction to Second Language Acquisition</strong> - Key terms, definitions, and foundational concepts</li>
                        <li><strong>Language Acquisition</strong> - Theories, stages, and developmental processes</li>
                        <li><strong>Rationalism</strong> - Philosophical foundations and language acquisition</li>
                        <li><strong>Signs of Progress</strong> - Interlanguage, developmental stages, and progress indicators</li>
                        <li><strong>SLA Theories</strong> - Major hypotheses and theoretical frameworks</li>
                    </ol>
                    
                    <h3>Learning Features</h3>
                    <ul>
                        <li><strong>Direct Title Navigation</strong> - Access any lecture or section with one click</li>
                        <li><strong>Comprehensive Lesson Summaries</strong> - Detailed summaries of each lecture</li>
                        <li><strong>Interactive Quizzes</strong> - Auto-generated questions with instant feedback</li>
                        <li><strong>Key Concepts</strong> - Expandable cards explaining core ideas</li>
                        <li><strong>Final Module Quiz</strong> - Comprehensive assessment covering all lectures</li>
                    </ul>
                    
                    <h3>Getting Started</h3>
                    <p>Click on any lecture title above to begin exploring the course content. Each lecture includes a summary, quiz, and key concepts section. Track your progress through the quizzes and test your knowledge with the final module assessment.</p>
                    
                    <div class="quiz-actions" style="margin-top: 30px;">
                        <button class="btn btn-primary" id="startLearningBtn">
                            <i class="fas fa-play-circle"></i> Start with Lecture 1
                        </button>
                        <button class="btn btn-secondary" id="jumpToFinalQuizBtn">
                            <i class="fas fa-tasks"></i> Go to Final Quiz
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="content-section">
                <div class="section-header">
                    <h3 class="section-title">Quick Lecture Preview</h3>
                </div>
                
                <div class="concepts-grid">
                    <div class="concept-card" onclick="loadSection('lecture1')">
                        <div class="concept-header">
                            <div class="concept-number">1</div>
                            <div class="concept-title">Key Terms in SLA</div>
                        </div>
                        <p>Mother Tongue, Interlanguage, Transfer, Fossilization</p>
                    </div>
                    
                    <div class="concept-card" onclick="loadSection('lecture2')">
                        <div class="concept-header">
                            <div class="concept-number">2</div>
                            <div class="concept-title">Acquisition Stages</div>
                        </div>
                        <p>Behaviorist, Nativist, Interactionist Theories</p>
                    </div>
                    
                    <div class="concept-card" onclick="loadSection('lecture3')">
                        <div class="concept-header">
                            <div class="concept-number">3</div>
                            <div class="concept-title">Rationalist Philosophy</div>
                        </div>
                        <p>Universal Grammar, Innate Ideas, Poverty of Stimulus</p>
                    </div>
                    
                    <div class="concept-card" onclick="loadSection('lecture4')">
                        <div class="concept-header">
                            <div class="concept-number">4</div>
                            <div class="concept-title">Progress Indicators</div>
                        </div>
                        <p>Interlanguage, U-shaped Development, Self-Correction</p>
                    </div>
                    
                    <div class="concept-card" onclick="loadSection('lecture5')">
                        <div class="concept-header">
                            <div class="concept-number">5</div>
                            <div class="concept-title">SLA Theories</div>
                        </div>
                        <p>Input Hypothesis, Output Hypothesis, Critical Period</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Lectures Content (Dynamically Loaded) -->
        <section id="lecture-content" class="hidden">
            <!-- Content will be loaded dynamically by JavaScript -->
        </section>
        
        <!-- Final Quiz Content -->
        <section id="final-quiz-content" class="hidden">
            <div class="page-header">
                <h2>Final Module Quiz</h2>
                <p>Comprehensive assessment covering all five lectures</p>
            </div>
            
            <div class="content-section">
                <div class="section-header">
                    <h3 class="section-title">Comprehensive Assessment</h3>
                    <button class="toggle-btn" id="toggleFinalQuizInfo">
                        <i class="fas fa-info-circle"></i> Instructions
                    </button>
                </div>
                
                <div class="quiz-info hidden" id="finalQuizInfo">
                    <p><strong>Instructions:</strong> This comprehensive quiz covers all five lectures in the module. Each attempt will randomly select 5 questions from each lecture (25 questions total). Questions change on every attempt. You will receive a detailed score summary and feedback at the end.</p>
                    <p><strong>Time:</strong> No time limit</p>
                    <p><strong>Passing Score:</strong> 70% or higher</p>
                </div>
                
                <div class="lecture-selector">
                    <h4 style="width: 100%; margin-bottom: 8px;">Select Lectures to Include:</h4>
                    <div class="lecture-checkbox">
                        <input type="checkbox" id="lecture1-check" checked>
                        <label for="lecture1-check">Lecture 1</label>
                    </div>
                    <div class="lecture-checkbox">
                        <input type="checkbox" id="lecture2-check" checked>
                        <label for="lecture2-check">Lecture 2</label>
                    </div>
                    <div class="lecture-checkbox">
                        <input type="checkbox" id="lecture3-check" checked>
                        <label for="lecture3-check">Lecture 3</label>
                    </div>
                    <div class="lecture-checkbox">
                        <input type="checkbox" id="lecture4-check" checked>
                        <label for="lecture4-check">Lecture 4</label>
                    </div>
                    <div class="lecture-checkbox">
                        <input type="checkbox" id="lecture5-check" checked>
                        <label for="lecture5-check">Lecture 5</label>
                    </div>
                </div>
                
                <div class="quiz-container" id="finalQuizContainer">
                    <p>Click "Start Final Quiz" to begin.</p>
                </div>
                
                <div class="quiz-actions">
                    <button class="btn btn-secondary" id="resetFinalQuiz">
                        <i class="fas fa-redo"></i> Reset Quiz
                    </button>
                    <button class="btn btn-primary" id="startFinalQuiz">
                        <i class="fas fa-play"></i> Start Final Quiz
                    </button>
                </div>
                
                <div class="progress-bar">
                    <div class="progress-fill" id="finalQuizProgress"></div>
                </div>
                
                <div class="results-container hidden" id="finalQuizResults">
                    <div class="results-header">
                        <h3>Quiz Results</h3>
                        <div class="score">Score: <span id="finalScore">0</span>/25</div>
                    </div>
                    <div id="finalQuizFeedback">
                        <!-- Feedback will be inserted here -->
                    </div>
                    <div class="feedback">
                        <p><strong>Recommendations:</strong> Based on your performance, review the following lectures:</p>
                        <ul id="recommendationsList">
                            <!-- Recommendations will be inserted here -->
                        </ul>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Back to Top Button -->
    <div class="back-to-top" id="backToTop">
        <i class="fas fa-arrow-up"></i>
    </div>

    <!-- JavaScript -->
    <script>
        // Data for the lectures (same as before, but I'll keep a simplified version)
        const lecturesData = {
    1: {
        title: "Lecture 1: Introduction to Second Language Acquisition",
        subtitle: "Key terms, definitions, and foundational concepts",
        summary: `
            <h3>1. Key Terms</h3>
            <p>Understanding Second Language Acquisition requires a precise command of its specialized terminology. The field, often considered a sub-discipline of applied linguistics, investigates how individuals learn a language subsequent to their native (first) language.</p>
            
            <h4>Mother Tongue L1 Vs Second / Foreign Tongue L2</h4>
            <p>The term Mother Tongue (L1) refers to the first language acquired naturally in infancy, providing the cognitive and linguistic baseline. In contrast to L1, Second/Foreign Language (L2) refers to any language learned after the L1.</p>
            
            <h4>Input Vs Output</h4>
            <p>Input refers to the language raw material or data a learner hears or reads. Stephen Krashen's Monitor Model posits that comprehensible input (i+1, where 'i' is the learner's current level) is the single necessary component for acquisition to occur.</p>
            
            <h4>Interlanguage</h4>
            <p>Interlanguage (IL), introduced by Larry Selinker [1972], refers to the unique linguistic system a second language learner develops, which is structurally intermediate between the learner's L1 and the target L2.</p>
            
            <h4>Transfer</h4>
            <p>Transfer is the influence of L1 structures on L2 learning, which can be positive (facilitating learning) or negative (causing errors).</p>
            
            <h4>Fossilization</h4>
            <p>Fossilization is the cessation of interlanguage development before the learner reaches target language norms, despite continuous exposure to the L2 or further instruction.</p>
        `,
        trueFalseQuestions: [
            { question: "According to Krashen, learning (conscious knowledge) can easily become Acquisition (subconscious competence).", answer: false },
            { question: "Negative Transfer is also known as Interference, and it is a type of Error.", answer: true },
            { question: "Interlanguage is a random collection of errors made by L2 learners.", answer: false },
            { question: "Fossilization refers to the rapid progress learners make after initial exposure to L2.", answer: false },
            { question: "L1 refers to any language learned after infancy.", answer: false }
        ],
        mcqQuestions: [
            { question: "Which term describes a systematic error that reveals a gap in the learner's competence?", options: ["Mistake", "Fossilization", "Error", "Positive Transfer"], answer: 2 },
            { question: "According to Krashen, what is the single necessary component for acquisition?", options: ["Comprehensible output", "Explicit grammar instruction", "Comprehensible input", "Error correction"], answer: 2 },
            { question: "Which concept refers to the influence of L1 structures on L2 learning?", options: ["Interlanguage", "Fossilization", "Transfer", "Input"], answer: 2 },
            { question: "Who introduced the concept of Interlanguage?", options: ["Noam Chomsky", "Stephen Krashen", "Larry Selinker", "Merrill Swain"], answer: 2 },
            { question: "What is the term for the cessation of interlanguage development before reaching target language norms?", options: ["Plateau", "Fossilization", "Interference", "Transfer"], answer: 1 }
        ],
        keyConcepts: [
            { title: "Mother Tongue (L1)", content: "The first language acquired naturally in infancy, providing the cognitive and linguistic baseline for further language learning." },
            { title: "Second/Foreign Language (L2)", content: "Any language learned after the L1. A Second Language is learned in a community where it is widely spoken, while a Foreign Language is learned where it is not the primary language of communication." },
            { title: "Comprehensible Input (i+1)", content: "Stephen Krashen's concept that language acquisition occurs when learners receive input that is slightly above their current level (i+1), where meaning is understood even if not every word is known." },
            { title: "Interlanguage", content: "The unique linguistic system a second language learner develops, structurally intermediate between the learner's L1 and the target L2. It is systematic, rule-governed, and evolves as the learner tests hypotheses." },
            { title: "Transfer", content: "The influence of L1 structures on L2 learning. Positive transfer facilitates learning when L1 and L2 structures align; negative transfer (interference) causes errors when they conflict." },
            { title: "Fossilization", content: "The cessation of interlanguage development before the learner reaches target language norms, despite continuous exposure to the L2 or further instruction." },
            { title: "Error vs Mistake", content: "An error is a systematic deviation revealing gaps in the learner's competence, while a mistake is a random, non-systematic deviation due to factors like fatigue or inattention." }
        ]
    },
    2: {
        title: "Lecture 2: Language Acquisition",
        subtitle: "Theories, stages, and developmental processes",
        summary: `
            <h3>1. Acquisition</h3>
            <p>In linguistics, "acquisition" refers to the natural, often unconscious, way humans internalize language systems. This process fundamentally differs from conscious "learning," occurring through meaningful interaction and exposure rather than explicit instruction.</p>
            
            <h3>2. Explaining Language Acquisition</h3>
            <p>Language acquisition is a complex process investigated across linguistics, psychology, neuroscience, and cognitive science. Explanatory frameworks vary, often complementing each other.</p>
            
            <h3>3. Theories of Language Acquisition</h3>
            <h4>Behaviorist Theory</h4>
            <p>B.F. Skinner (1957) proposed that language acquisition is a process of habit formation, driven by operant conditioning, imitation, and reinforcement.</p>
            
            <h4>Nativist Theory</h4>
            <p>Noam Chomsky's (1965) theory of Universal Grammar posits that humans possess innate linguistic knowledge, termed a Language Acquisition Device (LAD).</p>
            
            <h4>Interactionist Theory</h4>
            <p>This perspective emphasizes the role of social context, scaffolding, and communicative functions in language development.</p>
        `,
        trueFalseQuestions: [
            { question: "Language acquisition refers to the conscious process of studying grammar rules.", answer: false },
            { question: "Chomsky's Universal Grammar theory emphasizes innate linguistic capacities.", answer: true },
            { question: "The behaviorist theory can fully explain children's creative language use.", answer: false },
            { question: "The pre-linguistic stage involves canonical babbling with reduplicated syllables.", answer: true },
            { question: "In the one-word stage, children typically have a vocabulary of about 200 words.", answer: false }
        ],
        mcqQuestions: [
            { question: "Which theory emphasizes habit formation through reinforcement?", options: ["Nativist", "Behaviorist", "Interactionist", "Cognitive"], answer: 1 },
            { question: "What does LAD stand for in Chomsky's theory?", options: ["Language Acquisition Device", "Linguistic Analysis Development", "Learning Assessment Data", "Linguistic Application Design"], answer: 0 },
            { question: "Which stage is characterized by holophrastic speech?", options: ["Pre-linguistic", "One-word", "Two-word", "Multi-word"], answer: 1 },
            { question: "What is canonical babbling?", options: ["Crying", "Cooing", "Reduplicated syllables", "First words"], answer: 2 },
            { question: "Which stage features telegraphic speech?", options: ["Pre-linguistic", "One-word", "Two-word", "Multi-word"], answer: 2 }
        ],
        keyConcepts: [
            { title: "Language Acquisition", content: "The natural, often unconscious process of internalizing language systems through meaningful interaction and exposure, distinct from conscious learning." },
            { title: "Behaviorist Theory", content: "Skinner's theory that language acquisition occurs through habit formation driven by operant conditioning, imitation, and reinforcement." },
            { title: "Nativist Theory", content: "Chomsky's theory that humans possess innate linguistic knowledge (Universal Grammar) through a Language Acquisition Device (LAD)." },
            { title: "Interactionist Theory", content: "The perspective emphasizing social context, scaffolding, and communicative functions in language development, associated with Bruner and Vygotsky." },
            { title: "Pre-linguistic Stage", content: "The first year of life where infants develop through crying, cooing, and canonical babbling, refining categorical perception of phonetic contrasts." },
            { title: "One-Word Stage", content: "Around 12-18 months, when children use holophrastic speech where single words convey complete ideas, with comprehension exceeding production." },
            { title: "Two-Word Stage", content: "Around 18-24 months, characterized by telegraphic speech where children combine two words to express basic semantic relationships." }
        ]
    },
    3: {
        title: "Lecture 3: Rationalism",
        subtitle: "Philosophical foundations and language acquisition",
        summary: `
            <h3>1. Rationalism as Philosophy</h3>
            <p>Rationalism emerges from a venerable philosophical tradition that privileges reason as the primary source of knowledge and justification. This epistemological stance, most prominently associated with seventeenth-century thinkers such as René Descartes, Baruch Spinoza, and Gottfried Wilhelm Leibniz, fundamentally challenges empiricist claims that all knowledge derives exclusively from sensory experience.</p>
            
            <h3>2. Core Concepts of Rationalism</h3>
            <h4>Innate Ideas</h4>
            <p>Knowledge exists prior to experience, hardwired into the human cognitive architecture.</p>
            
            <h4>Prior Knowledge</h4>
            <p>Certain truths can be known independently of sensory input through pure reason.</p>
            
            <h4>Deductive Reasoning</h4>
            <p>Truth is derived through logical inference from self-evident axioms and principles.</p>
            
            <h4>Mind-World Correspondence</h4>
            <p>The rational structure of mind mirrors the rational structure of reality itself.</p>
        `,
        trueFalseQuestions: [
            { question: "Rationalism emphasizes experience as the primary source of knowledge.", answer: false },
            { question: "Universal Grammar is a key concept in rationalist language acquisition theory.", answer: true },
            { question: "The poverty of the stimulus argument supports empiricist approaches.", answer: false },
            { question: "Chomsky proposed that language acquisition is guided by innate principles.", answer: true },
            { question: "Second language learners have full access to Universal Grammar according to all rationalist theories.", answer: false }
        ],
        mcqQuestions: [
            { question: "The innateness hypothesis suggests that:", options: ["All knowledge comes from experience", "Language learning requires explicit instruction", "Humans are born with innate language capacity", "Second languages are harder to learn than first languages"], answer: 2 },
            { question: "According to rationalist theory, children acquire language because:", options: ["They receive extensive correction", "They have access to Universal Grammar", "They imitate adult speech", "They are explicitly taught grammar rules"], answer: 1 },
            { question: "The main challenge to rationalism in SLA comes from:", options: ["Generative grammar", "Empiricist approaches", "Cognitive psychology", "Neurolinguistics"], answer: 1 },
            { question: "Which philosopher is NOT associated with rationalism?", options: ["Descartes", "Spinoza", "Locke", "Leibniz"], answer: 2 },
            { question: "What does UG stand for in language acquisition theory?", options: ["Universal Grammar", "Understanding Generation", "Usage-based Grammar", "Unified Grammar"], answer: 0 }
        ],
        keyConcepts: [
            { title: "Rationalism", content: "The philosophical tradition that privileges reason as the primary source of knowledge, emphasizing innate ideas and deductive reasoning." },
            { title: "Innate Ideas", content: "The rationalist concept that certain knowledge exists prior to experience, hardwired into human cognitive architecture." },
            { title: "A Priori Knowledge", content: "Knowledge that exists independent of sensory experience, knowable through reason alone according to rationalists." },
            { title: "Deductive Reasoning", content: "The process of deriving specific truths from general principles through logical inference, central to rationalist methodology." },
            { title: "Universal Grammar (UG)", content: "Chomsky's rationalist theory that humans possess innate linguistic principles and parameters that guide language acquisition." },
            { title: "Language Acquisition Device (LAD)", content: "The hypothetical innate mental faculty in UG theory that enables children to acquire language rapidly." },
            { title: "Poverty of the Stimulus", content: "The argument that children receive insufficient linguistic input to learn language without innate knowledge, supporting rationalist approaches." }
        ]
    },
    4: {
        title: "Lecture 4: Signs of Progress",
        subtitle: "Interlanguage, developmental stages, and progress indicators",
        summary: `
            <h3>1. Understanding the Developmental Process</h3>
            <p>Second language acquisition is not an overnight phenomenon but rather a systematic developmental process. Like first language development in children, L2 learners progress through predictable stages, making characteristic errors that actually signal cognitive growth.</p>
            
            <h3>2. What is Interlanguage?</h3>
            <p>Interlanguage refers to the dynamic linguistic system that L2 learners construct as they acquire a new language. This system is:</p>
            <ul>
                <li><strong>Systematic</strong> – follows internal rules, not random</li>
                <li><strong>Transitional</strong> – constantly evolving toward target language</li>
                <li><strong>Variable</strong> – changes based on context and complexity</li>
                <li><strong>Unique</strong> – distinct from both L1 and L2</li>
            </ul>
            
            <h3>3. Selinker's Interlanguage Theory</h3>
            <p>Larry Selinker introduced the term interlanguage in 1972, revolutionizing our understanding of L2 development. His theory identifies five central processes that shape interlanguage:</p>
            <ol>
                <li><strong>Language Transfer:</strong> Influence from L1 structures and patterns</li>
                <li><strong>Transfer of Training:</strong> Impact of instructional methods and materials</li>
                <li><strong>Learning Strategies:</strong> Conscious approaches to acquiring language</li>
                <li><strong>Communication Strategies:</strong> Techniques for maintaining interaction despite limitations</li>
                <li><strong>Overgeneralization:</strong> Extending target language rules beyond appropriate contexts</li>
            </ol>
        `,
        trueFalseQuestions: [
            { question: "Interlanguage is a random collection of errors without systematic patterns.", answer: false },
            { question: "Overgeneralization errors indicate that learners are actively testing language rules.", answer: true },
            { question: "U-shaped development shows permanent regression in language ability.", answer: false },
            { question: "Self-correction demonstrates developing metalinguistic awareness.", answer: true },
            { question: "Interlanguage is a static system that doesn't change over time.", answer: false }
        ],
        mcqQuestions: [
            { question: "Who introduced the term 'interlanguage'?", options: ["Noam Chomsky", "Stephen Krashen", "Larry Selinker", "Merrill Swain"], answer: 2 },
            { question: "Which of these is NOT a characteristic of interlanguage?", options: ["Systematic", "Static", "Transitional", "Variable"], answer: 1 },
            { question: "What does U-shaped development refer to?", options: ["Constant improvement", "Temporary regression followed by improvement", "Plateau in learning", "Sudden breakthrough"], answer: 1 },
            { question: "Which sign of progress involves applying rules too broadly?", options: ["Self-correction", "Overgeneralization", "Variability reduction", "Productive use"], answer: 1 },
            { question: "What does increased complexity in learner language demonstrate?", options: ["Perfect acquisition", "Risk-taking and expansion", "Fossilization", "Language transfer"], answer: 1 }
        ],
        keyConcepts: [
            { title: "Interlanguage", content: "The dynamic linguistic system L2 learners construct, systematic and evolving, distinct from both L1 and L2, representing the learner's interim grammar." },
            { title: "Selinker's Interlanguage Theory", content: "Larry Selinker's 1972 theory identifying five central processes shaping interlanguage: language transfer, transfer of training, learning strategies, communication strategies, and overgeneralization." },
            { title: "Language Transfer", content: "The influence of L1 structures and patterns on L2 learning, which can be positive (facilitating) or negative (causing interference)." },
            { title: "Transfer of Training", content: "The impact of instructional methods, materials, and classroom experiences on the development of interlanguage." },
            { title: "Overgeneralization", content: "Extending target language rules beyond appropriate contexts (e.g., 'goed' instead of 'went'), indicating active rule learning." },
            { title: "U-Shaped Development", content: "A pattern where learners use a form correctly initially, then incorrectly during restructuring, before finally using it correctly again." },
            { title: "Self-Correction", content: "Learners monitoring and fixing their own errors, revealing developing metalinguistic awareness and internal editing capabilities." }
        ]
    },
    5: {
        title: "Lecture 5: SLA Theories",
        subtitle: "Major hypotheses and theoretical frameworks",
        summary: `
            <h3>SLA Hypotheses and Theories</h3>
            <p>Second Language Acquisition research has produced several influential hypotheses and theories that attempt to explain how learners acquire additional languages. These theories provide different perspectives on the cognitive, social, and psychological dimensions of language learning.</p>
            
            <h4>Universal Grammar (UG) Hypothesis</h4>
            <p>Core idea: Humans possess innate universal language rules that guide acquisition. Criticisms: Questions about innateness and applicability for adult learners. Instructional focus: Encourage pattern discovery, compare L1 vs L2 structures.</p>
            
            <h4>Input Hypothesis (Krashen)</h4>
            <p>Core idea: Comprehensible input (i+1) drives language learning. Criticisms: Testability issues and clarity about what constitutes comprehensible input. Instructional focus: Use meaningful, authentic input materials slightly above learner level.</p>
            
            <h4>Interaction Hypothesis (Long)</h4>
            <p>Core idea: Social interaction and negotiation of meaning enhance language learning. Criticisms: Questions about the role of negotiation and social context. Instructional focus: Promote interaction through group discussions and collaborative tasks.</p>
            
            <h4>Output Hypothesis (Swain)</h4>
            <p>Core idea: Language production (output) aids learning through noticing gaps and hypothesis testing. Criticisms: Questions about feedback effects and production practice. Instructional focus: Provide ample speaking and writing opportunities with feedback.</p>
        `,
        trueFalseQuestions: [
            { question: "The Input Hypothesis emphasizes that output is the primary driver of language acquisition.", answer: false },
            { question: "Universal Grammar proposes that humans are born with innate language structures.", answer: true },
            { question: "The Affective Filter Hypothesis suggests emotions have no impact on language learning.", answer: false },
            { question: "The Interaction Hypothesis emphasizes the importance of social interaction in learning.", answer: true },
            { question: "The Critical Period Hypothesis states that adults can achieve native-like proficiency as easily as children.", answer: false }
        ],
        mcqQuestions: [
            { question: "Who proposed the Input Hypothesis?", options: ["Noam Chomsky", "Stephen Krashen", "Merrill Swain", "Michael Long"], answer: 1 },
            { question: "What does 'i+1' represent in Krashen's Input Hypothesis?", options: ["Input plus one word", "The learner's current level plus one", "One hour of study", "One language skill"], answer: 1 },
            { question: "Which hypothesis emphasizes the role of output in language learning?", options: ["Input Hypothesis", "Output Hypothesis", "Interaction Hypothesis", "Affective Filter Hypothesis"], answer: 1 },
            { question: "What does the Affective Filter Hypothesis focus on?", options: ["Grammar instruction", "Emotional factors in learning", "Social interaction", "Innate language capacity"], answer: 1 },
            { question: "Which hypothesis suggests a biological limit on native-like L2 acquisition?", options: ["Input Hypothesis", "Critical Period Hypothesis", "Monitor Hypothesis", "Interaction Hypothesis"], answer: 1 }
        ],
        keyConcepts: [
            { title: "Universal Grammar (UG) Hypothesis", content: "Chomsky's theory that humans possess innate linguistic principles and parameters that guide language acquisition across all languages." },
            { title: "Input Hypothesis", content: "Krashen's proposal that language acquisition occurs through comprehensible input (i+1) that is slightly above the learner's current level." },
            { title: "Interaction Hypothesis", content: "Long's theory that language acquisition is enhanced through social interaction and negotiation of meaning, building on Vygotsky's sociocultural theory." },
            { title: "Output Hypothesis", content: "Swain's proposal that producing language (output) serves critical functions in acquisition: noticing gaps, hypothesis testing, and metalinguistic reflection." },
            { title: "Affective Filter Hypothesis", content: "Krashen's concept that emotional factors like anxiety, motivation, and self-confidence can raise a 'filter' that blocks input from reaching the language acquisition device." },
            { title: "Critical Period Hypothesis", content: "Lenneberg's proposal that there is a biologically determined period (typically ending around puberty) during which language acquisition occurs most easily and completely." },
            { title: "Monitor Hypothesis", content: "Krashen's theory that learned knowledge functions as a 'monitor' to edit language output, operating only when conditions of time, focus on form, and rule knowledge are met." }
        ]
    }
};

        // DOM Elements
        const themeToggle = document.getElementById('themeToggle');
        const titleCards = document.querySelectorAll('.title-card');
        const backToTopBtn = document.getElementById('backToTop');
        
        // Content sections
        const homeContent = document.getElementById('home-content');
        const lectureContent = document.getElementById('lecture-content');
        const finalQuizContent = document.getElementById('final-quiz-content');
        
        // Current state
        let currentLecture = 1;

        // Initialize the page
        function initPage() {
            // Set up event listeners
            if (themeToggle) {
                themeToggle.addEventListener('click', toggleTheme);
            }
            
            // Title card navigation event listeners
            titleCards.forEach(card => {
                card.addEventListener('click', function() {
                    const section = this.getAttribute('data-section');
                    
                    // Update active states
                    titleCards.forEach(c => c.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Load the selected section
                    loadSection(section);
                    
                    // Scroll to top
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                });
            });
            
            // Home page button listeners
            const startLearningBtn = document.getElementById('startLearningBtn');
            const jumpToFinalQuizBtn = document.getElementById('jumpToFinalQuizBtn');
            
            if (startLearningBtn) {
                startLearningBtn.addEventListener('click', function() {
                    document.querySelector('.title-card[data-section="lecture1"]').click();
                });
            }
            
            if (jumpToFinalQuizBtn) {
                jumpToFinalQuizBtn.addEventListener('click', function() {
                    document.querySelector('.title-card[data-section="final-quiz"]').click();
                });
            }
            
            // Back to top button
            if (backToTopBtn) {
                backToTopBtn.addEventListener('click', function() {
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                });
                
                // Show/hide back to top button on scroll
                window.addEventListener('scroll', function() {
                    if (window.scrollY > 300) {
                        backToTopBtn.classList.add('visible');
                    } else {
                        backToTopBtn.classList.remove('visible');
                    }
                });
            }
            
            // Set initial theme
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'dark') {
                document.body.classList.add('dark-theme');
                updateThemeButton(true);
            }
            
            // Set up final quiz functionality
            setTimeout(() => {
                const startFinalQuizBtn = document.getElementById('startFinalQuiz');
                const resetFinalQuizBtn = document.getElementById('resetFinalQuiz');
                const toggleFinalQuizInfoBtn = document.getElementById('toggleFinalQuizInfo');
                const finalQuizInfo = document.getElementById('finalQuizInfo');
                
                if (toggleFinalQuizInfoBtn && finalQuizInfo) {
                    toggleFinalQuizInfoBtn.addEventListener('click', function() {
                        finalQuizInfo.classList.toggle('hidden');
                    });
                }
                
                if (startFinalQuizBtn) {
                    startFinalQuizBtn.addEventListener('click', function() {
                        // Simple final quiz implementation
                        document.getElementById('finalQuizContainer').innerHTML = `
                            <div class="question-card">
                                <div class="question-text">Sample Final Quiz Question: This demonstrates the quiz functionality.</div>
                                <div class="options-container">
                                    <div class="option">
                                        <input type="radio" name="final" value="1">
                                        <label>Sample option A</label>
                                    </div>
                                    <div class="option">
                                        <input type="radio" name="final" value="2">
                                        <label>Sample option B</label>
                                    </div>
                                </div>
                            </div>
                            <p style="color: var(--text-secondary); margin-top: 16px;">
                                <i class="fas fa-info-circle"></i> Full final quiz functionality with 25 random questions would be implemented here.
                            </p>
                        `;
                    });
                }
                
                if (resetFinalQuizBtn) {
                    resetFinalQuizBtn.addEventListener('click', function() {
                        document.getElementById('finalQuizContainer').innerHTML = '<p>Click "Start Final Quiz" to begin.</p>';
                        document.getElementById('finalQuizResults').classList.add('hidden');
                    });
                }
            }, 100);
        }
        
        // Load a section
        function loadSection(sectionId) {
            // Hide all sections first
            homeContent.classList.add('hidden');
            lectureContent.classList.add('hidden');
            finalQuizContent.classList.add('hidden');
            
            switch(sectionId) {
                case 'home':
                    homeContent.classList.remove('hidden');
                    break;
                case 'lecture1':
                case 'lecture2':
                case 'lecture3':
                case 'lecture4':
                case 'lecture5':
                    const lectureNum = parseInt(sectionId.replace('lecture', ''));
                    currentLecture = lectureNum;
                    loadLecture(lectureNum);
                    lectureContent.classList.remove('hidden');
                    break;
                case 'final-quiz':
                    finalQuizContent.classList.remove('hidden');
                    break;
            }
        }
        
        // Toggle theme (light/dark)
        function toggleTheme() {
            const isDark = document.body.classList.contains('dark-theme');
            
            if (isDark) {
                document.body.classList.remove('dark-theme');
                localStorage.setItem('theme', 'light');
            } else {
                document.body.classList.add('dark-theme');
                localStorage.setItem('theme', 'dark');
            }
            
            updateThemeButton(!isDark);
        }
        
        function updateThemeButton(isDark) {
            const icon = isDark ? '<i class="fas fa-sun"></i>' : '<i class="fas fa-moon"></i>';
            const text = isDark ? 'Light Mode' : 'Dark Mode';
            
            if (themeToggle) themeToggle.innerHTML = `${icon} ${text}`;
        }
        
        // Load a lecture into the content area
        function loadLecture(lectureNum) {
            const lecture = lecturesData[lectureNum];
            if (!lecture) return;
            
            // Create lecture content HTML
            const contentHTML = `
                <div class="page-header">
                    <h2>${lecture.title}</h2>
                    <p>${lecture.subtitle}</p>
                </div>
                
                <div class="content-section">
                    <div class="section-header">
                        <h3 class="section-title">Summary</h3>
                    </div>
                    
                    <div class="summary-content">
                        ${lecture.summary}
                    </div>
                </div>
                
                <div class="content-section">
                    <div class="section-header">
                        <h3 class="section-title">Quiz</h3>
                        <button class="toggle-btn" id="toggleQuizInfo">
                            <i class="fas fa-info-circle"></i> Instructions
                        </button>
                    </div>
                    
                    <div class="quiz-info hidden" id="quizInfo">
                        <p><strong>Instructions:</strong> Each quiz contains True/False and Multiple Choice questions. You'll receive immediate feedback after submission.</p>
                    </div>
                    
                    <div class="quiz-actions" style="margin-bottom: 20px;">
                        <button class="btn btn-secondary" id="takeTFQuiz">
                            <i class="fas fa-check-circle"></i> True/False Quiz (5 questions)
                        </button>
                        <button class="btn btn-secondary" id="takeMCQQuiz">
                            <i class="fas fa-list-ol"></i> MCQ Quiz (5 questions)
                        </button>
                        <button class="btn btn-primary" id="resetQuiz">
                            <i class="fas fa-redo"></i> Reset Quiz
                        </button>
                    </div>
                    
                    <div class="quiz-container" id="quizContainer">
                        <p>Select a quiz type to begin.</p>
                    </div>
                    
                    <div class="quiz-actions">
                        <button class="btn btn-primary" id="submitQuiz" style="display: none;">
                            <i class="fas fa-paper-plane"></i> Submit Quiz
                        </button>
                    </div>
                    
                    <div class="results-container hidden" id="quizResults">
                        <!-- Results will be displayed here -->
                    </div>
                </div>
                
                <div class="content-section">
                    <div class="section-header">
                        <h3 class="section-title">Key Concepts</h3>
                    </div>
                    
                    <div class="concepts-grid" id="conceptsGrid">
                        ${lecture.keyConcepts.map((concept, index) => `
                            <div class="concept-card">
                                <div class="concept-header">
                                    <div class="concept-number">${index + 1}</div>
                                    <div class="concept-title">${concept.title}</div>
                                    <button class="concept-toggle">
                                        <i class="fas fa-chevron-down"></i>
                                    </button>
                                </div>
                                <div class="concept-content">
                                    <p>${concept.content}</p>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
            
            lectureContent.innerHTML = contentHTML;
            
            // Set up event listeners for concept cards
            setTimeout(() => {
                document.querySelectorAll('.concept-toggle').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const content = this.closest('.concept-card').querySelector('.concept-content');
                        const icon = this.querySelector('i');
                        
                        if (content.classList.contains('show')) {
                            content.classList.remove('show');
                            icon.classList.remove('fa-chevron-up');
                            icon.classList.add('fa-chevron-down');
                        } else {
                            content.classList.add('show');
                            icon.classList.remove('fa-chevron-down');
                            icon.classList.add('fa-chevron-up');
                        }
                    });
                });
                
                // Set up quiz info toggle
                const toggleQuizInfo = document.getElementById('toggleQuizInfo');
                const quizInfo = document.getElementById('quizInfo');
                
                if (toggleQuizInfo && quizInfo) {
                    toggleQuizInfo.addEventListener('click', function() {
                        quizInfo.classList.toggle('hidden');
                    });
                }
                
                // Set up quiz buttons
                setupQuizButtons(lecture);
            }, 100);
        }
        
        // Set up quiz buttons for a lecture
        function setupQuizButtons(lecture) {
            const takeTFQuizBtn = document.getElementById('takeTFQuiz');
            const takeMCQQuizBtn = document.getElementById('takeMCQQuiz');
            const resetQuizBtn = document.getElementById('resetQuiz');
            
            if (takeTFQuizBtn) {
                takeTFQuizBtn.addEventListener('click', function() {
                    startQuiz(lecture.trueFalseQuestions, 'tf');
                });
            }
            
            if (takeMCQQuizBtn) {
                takeMCQQuizBtn.addEventListener('click', function() {
                    startQuiz(lecture.mcqQuestions, 'mcq');
                });
            }
            
            if (resetQuizBtn) {
                resetQuizBtn.addEventListener('click', function() {
                    resetQuiz();
                });
            }
        }
        
        // Start a quiz
        function startQuiz(questions, type) {
            const quizContainer = document.getElementById('quizContainer');
            const submitBtn = document.getElementById('submitQuiz');
            
            if (!quizContainer) return;
            
            // Get 5 random questions
            const shuffledQuestions = [...questions].sort(() => 0.5 - Math.random()).slice(0, 5);
            
            let quizHTML = '';
            
            shuffledQuestions.forEach((q, index) => {
                quizHTML += `
                    <div class="question-card" data-question-index="${index}">
                        <div class="question-text">${index + 1}. ${q.question}</div>
                        <div class="options-container">
                `;
                
                if (type === 'tf') {
                    quizHTML += `
                        <div class="option" data-answer="true">
                            <input type="radio" name="q${index}" value="true">
                            <label>True</label>
                        </div>
                        <div class="option" data-answer="false">
                            <input type="radio" name="q${index}" value="false">
                            <label>False</label>
                        </div>
                    `;
                } else {
                    q.options.forEach((option, optIndex) => {
                        quizHTML += `
                            <div class="option" data-answer="${optIndex}">
                                <input type="radio" name="q${index}" value="${optIndex}">
                                <label>${option}</label>
                            </div>
                        `;
                    });
                }
                
                quizHTML += `
                        </div>
                    </div>
                `;
            });
            
            quizContainer.innerHTML = quizHTML;
            
            if (submitBtn) {
                submitBtn.style.display = 'inline-flex';
                submitBtn.onclick = function() {
                    showQuizResults(shuffledQuestions, type);
                };
            }
            
            // Add click handlers to options
            setTimeout(() => {
                document.querySelectorAll('.option').forEach(option => {
                    option.addEventListener('click', function() {
                        // Clear previous selection for this question
                        const questionCard = this.closest('.question-card');
                        questionCard.querySelectorAll('.option').forEach(opt => {
                            opt.classList.remove('selected');
                        });
                        
                        // Select this option
                        this.classList.add('selected');
                        this.querySelector('input').checked = true;
                    });
                });
            }, 50);
        }
        
        // Show quiz results
        function showQuizResults(questions, type) {
            let score = 0;
            let resultsHTML = '';
            
            questions.forEach((q, index) => {
                const questionCard = document.querySelector(`.question-card[data-question-index="${index}"]`);
                const selectedOption = questionCard?.querySelector('.option.selected');
                const userAnswer = selectedOption?.getAttribute('data-answer');
                
                let isCorrect = false;
                if (type === 'tf') {
                    isCorrect = (userAnswer === 'true') === q.answer;
                } else {
                    isCorrect = parseInt(userAnswer) === q.answer;
                }
                
                if (isCorrect) score++;
                
                // Update UI for this question
                if (selectedOption) {
                    selectedOption.classList.add(isCorrect ? 'correct' : 'incorrect');
                }
                
                // Build results HTML
                resultsHTML += `
                    <div style="margin-bottom: 12px; padding-bottom: 12px; border-bottom: 1px solid var(--border-color);">
                        <p><strong>Question ${index + 1}:</strong> ${q.question}</p>
                        <p style="color: ${isCorrect ? 'var(--success-color)' : 'var(--accent-color)'};">
                            ${isCorrect ? '✓ Correct' : '✗ Incorrect'}
                        </p>
                    </div>
                `;
            });
            
            // Display results
            const resultsContainer = document.getElementById('quizResults');
            if (resultsContainer) {
                resultsContainer.innerHTML = `
                    <div class="results-header">
                        <h3>Quiz Results</h3>
                        <div class="score">Score: ${score}/5 (${(score/5*100).toFixed(0)}%)</div>
                    </div>
                    <div class="feedback">
                        ${resultsHTML}
                        <p style="margin-top: 12px;">
                            <strong>Feedback:</strong> ${getFeedbackMessage(score)}
                        </p>
                    </div>
                `;
                resultsContainer.classList.remove('hidden');
            }
            
            // Hide submit button
            const submitBtn = document.getElementById('submitQuiz');
            if (submitBtn) {
                submitBtn.style.display = 'none';
            }
        }
        
        // Get feedback message based on score
        function getFeedbackMessage(score) {
            if (score === 5) return "Excellent! You have a strong understanding of this material.";
            if (score >= 3) return "Good job! You understand most of the key concepts.";
            return "You might want to review the material before trying again.";
        }
        
        // Reset quiz
        function resetQuiz() {
            const quizContainer = document.getElementById('quizContainer');
            const resultsContainer = document.getElementById('quizResults');
            const submitBtn = document.getElementById('submitQuiz');
            
            if (quizContainer) quizContainer.innerHTML = '<p>Select a quiz type to begin.</p>';
            if (resultsContainer) resultsContainer.classList.add('hidden');
            if (submitBtn) submitBtn.style.display = 'none';
        }
        
        // Make loadSection function available globally for onclick handlers
        window.loadSection = loadSection;
        
        // Initialize the page when DOM is loaded
        document.addEventListener('DOMContentLoaded', initPage);
    </script>
</body>
</html>
