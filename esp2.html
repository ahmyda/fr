<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Needs Analysis Quiz (Randomized)</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      padding: 20px;
      margin: 0;
      min-height: 100vh;
    }
    
    .container {
      max-width: 900px;
      margin: 0 auto;
      background: white;
      border-radius: 12px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      padding: 30px;
      position: relative;
      overflow: hidden;
    }
    
    h1 {
      text-align: center;
      color: #2c3e50;
      margin-bottom: 10px;
      font-size: 2.2rem;
    }
    
    .subtitle {
      text-align: center;
      color: #7f8c8d;
      margin-bottom: 30px;
      font-size: 1.1rem;
    }
    
    .quiz-info {
      display: flex;
      justify-content: space-between;
      background: #f8f9fa;
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 25px;
      border-left: 5px solid #3498db;
    }
    
    .info-item {
      text-align: center;
      flex: 1;
    }
    
    .info-value {
      font-weight: bold;
      font-size: 1.3rem;
      color: #2c3e50;
    }
    
    .info-label {
      font-size: 0.9rem;
      color: #7f8c8d;
      margin-top: 5px;
    }
    
    .question {
      background: #fff;
      padding: 20px;
      margin-bottom: 20px;
      border-radius: 8px;
      border: 1px solid #eaeaea;
      transition: all 0.3s ease;
      position: relative;
    }
    
    .question:hover {
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
    }
    
    .question-number {
      display: inline-block;
      background: #3498db;
      color: white;
      width: 30px;
      height: 30px;
      border-radius: 50%;
      text-align: center;
      line-height: 30px;
      margin-right: 10px;
      font-weight: bold;
    }
    
    .question-text {
      font-weight: 600;
      color: #2c3e50;
      margin-bottom: 15px;
      font-size: 1.1rem;
    }
    
    .options {
      margin-left: 15px;
    }
    
    .option {
      margin-bottom: 10px;
      padding: 8px 0;
      cursor: pointer;
    }
    
    .option input {
      margin-right: 10px;
      cursor: pointer;
    }
    
    .option label {
      cursor: pointer;
    }
    
    .submit-btn {
      background: #3498db;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 600;
      font-size: 1rem;
      display: block;
      margin: 10px 0 20px 40px;
      transition: background 0.3s ease;
    }
    
    .submit-btn:hover {
      background: #2980b9;
    }
    
    .submit-btn:disabled {
      background: #bdc3c7;
      cursor: not-allowed;
    }
    
    .feedback {
      padding: 15px;
      border-radius: 6px;
      margin: 10px 0 20px 40px;
      display: none;
    }
    
    .correct {
      background: #d4edda;
      color: #155724;
      border-left: 5px solid #28a745;
    }
    
    .incorrect {
      background: #f8d7da;
      color: #721c24;
      border-left: 5px solid #dc3545;
    }
    
    .feedback h4 {
      margin-top: 0;
      margin-bottom: 8px;
    }
    
    .controls {
      text-align: center;
      margin-top: 30px;
      display: flex;
      justify-content: center;
      gap: 15px;
    }
    
    .control-btn {
      padding: 12px 25px;
      border: none;
      border-radius: 6px;
      font-weight: 600;
      cursor: pointer;
      font-size: 1rem;
      transition: all 0.3s ease;
    }
    
    .shuffle-btn {
      background: #9b59b6;
      color: white;
    }
    
    .shuffle-btn:hover {
      background: #8e44ad;
    }
    
    .results-btn {
      background: #2ecc71;
      color: white;
    }
    
    .results-btn:hover {
      background: #27ae60;
    }
    
    .reset-btn {
      background: #e74c3c;
      color: white;
    }
    
    .reset-btn:hover {
      background: #c0392b;
    }
    
    .results-container {
      display: none;
      background: #f8f9fa;
      padding: 25px;
      border-radius: 8px;
      margin-top: 30px;
      border-left: 5px solid #2ecc71;
    }
    
    .results-title {
      color: #2c3e50;
      margin-top: 0;
      text-align: center;
    }
    
    .score-display {
      text-align: center;
      font-size: 1.5rem;
      font-weight: bold;
      color: #2c3e50;
      margin: 20px 0;
    }
    
    .score-value {
      font-size: 2.5rem;
      color: #3498db;
    }
    
    .results-summary {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-top: 20px;
    }
    
    .summary-item {
      background: white;
      padding: 15px;
      border-radius: 6px;
      box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
    }
    
    .correct-answers {
      border-top: 4px solid #2ecc71;
    }
    
    .incorrect-answers {
      border-top: 4px solid #e74c3c;
    }
    
    @media (max-width: 768px) {
      .container {
        padding: 15px;
      }
      
      .quiz-info {
        flex-direction: column;
        gap: 15px;
      }
      
      .results-summary {
        grid-template-columns: 1fr;
      }
      
      .controls {
        flex-direction: column;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Needs Analysis Quiz</h1>
    <div class="subtitle">Test your knowledge of language learning needs analysis concepts</div>
    
    <div class="quiz-info">
      <div class="info-item">
        <div class="info-value" id="current-question">1</div>
        <div class="info-label">Current Question</div>
      </div>
      <div class="info-item">
        <div class="info-value" id="total-questions">5</div>
        <div class="info-label">Total Questions</div>
      </div>
      <div class="info-item">
        <div class="info-value" id="score">0</div>
        <div class="info-label">Score</div>
      </div>
    </div>
    
    <div id="quiz-container">
      <!-- Questions will be dynamically inserted here -->
    </div>
    
    <div class="controls">
      <button class="control-btn shuffle-btn" id="shuffle-btn">Shuffle Questions</button>
      <button class="control-btn results-btn" id="results-btn">Show Results</button>
      <button class="control-btn reset-btn" id="reset-btn">Reset Quiz</button>
    </div>
    
    <div class="results-container" id="results-container">
      <h2 class="results-title">Quiz Results</h2>
      <div class="score-display">
        Your Score: <span class="score-value" id="final-score">0</span>/5
      </div>
      <div class="results-summary">
        <div class="summary-item correct-answers">
          <h3>Correct Answers</h3>
          <ul id="correct-list">
            <!-- Correct answers will be listed here -->
          </ul>
        </div>
        <div class="summary-item incorrect-answers">
          <h3>Incorrect Answers</h3>
          <ul id="incorrect-list">
            <!-- Incorrect answers will be listed here -->
          </ul>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Questions database with answers and explanations
    const questions = [
      {
        question: "A student saying 'I need more visual aids to learn vocabulary' is expressing:",
        options: ["Target Needs", "Language Needs", "Learning Needs", "Situational Needs"],
        answer: 2, // Learning Needs
        explanation: "Learning needs refer to how the learner prefers to learn, including methods, materials, and conditions that support their learning process."
      },
      {
        question: "A learner needs English to write academic essays. This is:",
        options: ["Learning Needs", "Target Needs", "Felt Needs", "Situational Needs"],
        answer: 1, // Target Needs
        explanation: "Target needs refer to what the learner needs to do in the target language, such as specific tasks like writing academic essays."
      },
      {
        question: "A teacher notices students lack grammar accuracy. This is:",
        options: ["Felt Needs", "Perceived Needs", "Learning Needs", "Target Needs"],
        answer: 1, // Perceived Needs
        explanation: "Perceived needs are identified by teachers or institutions based on observation or assessment, rather than by the learners themselves."
      },
      {
        question: "Poor classroom equipment is an example of:",
        options: ["Language Needs", "Situational Needs", "Target Needs", "Felt Needs"],
        answer: 1, // Situational Needs
        explanation: "Situational needs refer to constraints and conditions in the learning environment, such as classroom equipment, schedule, or class size."
      },
      {
        question: "Wanting English to talk to tourists refers to:",
        options: ["Learning Needs", "Target Needs", "Situational Needs", "Perceived Needs"],
        answer: 1, // Target Needs
        explanation: "This is a target need because it specifies a purpose for using English in a real-world situation."
      },
      {
        question: "Student motivation belongs to:",
        options: ["Language Needs", "Learning Needs", "Target Needs", "Objective Needs"],
        answer: 1, // Learning Needs
        explanation: "Learning needs include factors that affect how a student learns, such as motivation, learning styles, and preferences."
      },
      {
        question: "Vocabulary related to medicine is:",
        options: ["Situational Needs", "Language Needs", "Learning Needs", "Felt Needs"],
        answer: 1, // Language Needs
        explanation: "Language needs refer to specific linguistic elements (vocabulary, grammar, skills) required for particular contexts like medicine."
      },
      {
        question: "Class size affecting participation is:",
        options: ["Target Needs", "Situational Needs", "Language Needs", "Felt Needs"],
        answer: 1, // Situational Needs
        explanation: "Situational needs include environmental and contextual factors that influence learning, such as class size."
      },
      {
        question: "A learner wants more speaking practice because they feel shy. This is:",
        options: ["Perceived Needs", "Felt Needs", "Target Needs", "Language Needs"],
        answer: 1, // Felt Needs
        explanation: "Felt needs are what learners themselves feel they need, often based on personal awareness of weaknesses or preferences."
      },
      {
        question: "Writing emails at work is an example of:",
        options: ["Learning Needs", "Target Needs", "Situational Needs", "Felt Needs"],
        answer: 1, // Target Needs
        explanation: "This is a target need because it specifies a real-world task the learner needs to accomplish in English."
      },
      {
        question: "Limited course time is part of:",
        options: ["Language Needs", "Situational Needs", "Target Needs", "Felt Needs"],
        answer: 1, // Situational Needs
        explanation: "Situational needs include practical constraints like time, resources, and institutional factors."
      },
      {
        question: "Grammar accuracy needed for exams is:",
        options: ["Learning Needs", "Language Needs", "Situational Needs", "Felt Needs"],
        answer: 1, // Language Needs
        explanation: "Language needs include specific linguistic competencies required for particular purposes like exams."
      },
      {
        question: "Student background and age relate to:",
        options: ["Subjective Needs", "Objective Needs", "Learning Needs", "Felt Needs"],
        answer: 1, // Objective Needs
        explanation: "Objective needs are factual information about learners (age, background, proficiency) that can be measured objectively."
      },
      {
        question: "Teacher decides students need more reading skills. This is:",
        options: ["Felt Needs", "Perceived Needs", "Learning Needs", "Situational Needs"],
        answer: 1, // Perceived Needs
        explanation: "Perceived needs are identified by teachers based on their professional judgment, not necessarily expressed by students."
      },
      {
        question: "Using English for presentations is:",
        options: ["Learning Needs", "Target Needs", "Felt Needs", "Situational Needs"],
        answer: 1, // Target Needs
        explanation: "This is a target need as it describes a specific task the learner needs to perform in English."
      }
    ];

    // Quiz state variables
    let currentQuestions = [];
    let userAnswers = [];
    let currentQuestionIndex = 0;
    let score = 0;

    // DOM elements
    const quizContainer = document.getElementById('quiz-container');
    const currentQuestionElement = document.getElementById('current-question');
    const totalQuestionsElement = document.getElementById('total-questions');
    const scoreElement = document.getElementById('score');
    const shuffleBtn = document.getElementById('shuffle-btn');
    const resultsBtn = document.getElementById('results-btn');
    const resetBtn = document.getElementById('reset-btn');
    const resultsContainer = document.getElementById('results-container');
    const finalScoreElement = document.getElementById('final-score');
    const correctListElement = document.getElementById('correct-list');
    const incorrectListElement = document.getElementById('incorrect-list');

    // Initialize the quiz
    function initQuiz() {
      // Reset state
      currentQuestions = [];
      userAnswers = [];
      currentQuestionIndex = 0;
      score = 0;
      
      // Select 5 random questions
      selectRandomQuestions();
      
      // Update UI
      updateQuizInfo();
      renderQuestions();
      resultsContainer.style.display = 'none';
      
      // Reset buttons
      resultsBtn.textContent = 'Show Results';
    }

    // Select 5 random questions from the pool
    function selectRandomQuestions() {
      const shuffled = [...questions].sort(() => 0.5 - Math.random());
      currentQuestions = shuffled.slice(0, 5);
    }

    // Update quiz information display
    function updateQuizInfo() {
      currentQuestionElement.textContent = currentQuestionIndex + 1;
      totalQuestionsElement.textContent = currentQuestions.length;
      scoreElement.textContent = score;
    }

    // Render questions to the DOM
    function renderQuestions() {
      quizContainer.innerHTML = '';
      
      currentQuestions.forEach((q, index) => {
        const questionElement = document.createElement('div');
        questionElement.className = 'question';
        
        // Check if user has answered this question
        const isAnswered = userAnswers[index] !== undefined;
        const isCurrent = index === currentQuestionIndex;
        
        // Create question HTML
        questionElement.innerHTML = `
          <div>
            <span class="question-number">${index + 1}</span>
            <span class="question-text">${q.question}</span>
          </div>
          <div class="options">
            ${q.options.map((option, optIndex) => `
              <div class="option">
                <input type="radio" 
                       name="q${index}" 
                       id="q${index}o${optIndex}" 
                       value="${optIndex}"
                       ${userAnswers[index] === optIndex ? 'checked' : ''}
                       ${isAnswered ? 'disabled' : ''}>
                <label for="q${index}o${optIndex}">${option}</label>
              </div>
            `).join('')}
          </div>
          <button class="submit-btn" 
                  data-index="${index}"
                  ${isAnswered ? 'disabled' : ''}>
            Submit Answer
          </button>
          <div class="feedback" id="feedback-${index}"></div>
        `;
        
        quizContainer.appendChild(questionElement);
        
        // Add event listeners to radio buttons
        q.options.forEach((option, optIndex) => {
          const radioBtn = document.getElementById(`q${index}o${optIndex}`);
          radioBtn.addEventListener('change', () => {
            // Enable the submit button when an option is selected
            const submitBtn = questionElement.querySelector('.submit-btn');
            submitBtn.disabled = false;
          });
        });
        
        // Add event listener to submit button
        const submitBtn = questionElement.querySelector('.submit-btn');
        submitBtn.addEventListener('click', () => submitAnswer(index));
        
        // Show feedback if already answered
        if (isAnswered) {
          showFeedback(index, userAnswers[index] === q.answer);
        }
      });
    }

    // Submit answer for a specific question
    function submitAnswer(index) {
      const selectedOption = document.querySelector(`input[name="q${index}"]:checked`);
      
      if (!selectedOption) {
        alert('Please select an answer before submitting.');
        return;
      }
      
      const answer = parseInt(selectedOption.value);
      const isCorrect = answer === currentQuestions[index].answer;
      
      // Store user's answer
      userAnswers[index] = answer;
      
      // Update score if correct
      if (isCorrect) {
        score++;
        scoreElement.textContent = score;
      }
      
      // Show feedback
      showFeedback(index, isCorrect);
      
      // Disable all radio buttons for this question
      const questionElement = quizContainer.children[index];
      const radioButtons = questionElement.querySelectorAll('input[type="radio"]');
      radioButtons.forEach(radio => radio.disabled = true);
      
      // Disable submit button
      const submitBtn = questionElement.querySelector('.submit-btn');
      submitBtn.disabled = true;
      
      // Move to next question if available
      if (currentQuestionIndex < currentQuestions.length - 1) {
        currentQuestionIndex++;
        currentQuestionElement.textContent = currentQuestionIndex + 1;
        
        // Scroll to next question
        const nextQuestion = quizContainer.children[currentQuestionIndex];
        nextQuestion.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
      }
    }

    // Show feedback for a question
    function showFeedback(index, isCorrect) {
      const feedbackElement = document.getElementById(`feedback-${index}`);
      const question = currentQuestions[index];
      
      feedbackElement.className = `feedback ${isCorrect ? 'correct' : 'incorrect'}`;
      feedbackElement.innerHTML = `
        <h4>${isCorrect ? 'Correct!' : 'Incorrect'}</h4>
        <p><strong>Answer:</strong> ${question.options[question.answer]}</p>
        <p>${question.explanation}</p>
      `;
      feedbackElement.style.display = 'block';
    }

    // Show quiz results
    function showResults() {
      // Calculate final score
      const finalScore = score;
      finalScoreElement.textContent = `${finalScore}/${currentQuestions.length}`;
      
      // Clear previous results
      correctListElement.innerHTML = '';
      incorrectListElement.innerHTML = '';
      
      // Populate results
      currentQuestions.forEach((q, index) => {
        const userAnswer = userAnswers[index];
        const isCorrect = userAnswer === q.answer;
        const listItem = document.createElement('li');
        listItem.innerHTML = `<strong>Q${index + 1}:</strong> ${q.question}<br>
                              <strong>Your answer:</strong> ${userAnswer !== undefined ? q.options[userAnswer] : 'Not answered'}<br>
                              <strong>Correct answer:</strong> ${q.options[q.answer]}`;
        
        if (isCorrect) {
          correctListElement.appendChild(listItem);
        } else {
          incorrectListElement.appendChild(listItem);
        }
      });
      
      // Show results container
      resultsContainer.style.display = 'block';
      
      // Update button text
      resultsBtn.textContent = 'Hide Results';
      
      // Scroll to results
      resultsContainer.scrollIntoView({ behavior: 'smooth' });
    }

    // Toggle results visibility
    function toggleResults() {
      if (resultsContainer.style.display === 'block') {
        resultsContainer.style.display = 'none';
        resultsBtn.textContent = 'Show Results';
      } else {
        showResults();
      }
    }

    // Event Listeners
    shuffleBtn.addEventListener('click', () => {
      initQuiz();
    });

    resultsBtn.addEventListener('click', toggleResults);

    resetBtn.addEventListener('click', () => {
      if (confirm('Are you sure you want to reset the quiz? Your current progress will be lost.')) {
        initQuiz();
      }
    });

    // Initialize the quiz when page loads
    window.addEventListener('DOMContentLoaded', initQuiz);
  </script>
</body>
</html>
